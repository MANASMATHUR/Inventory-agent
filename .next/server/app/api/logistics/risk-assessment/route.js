"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/logistics/risk-assessment/route";
exports.ids = ["app/api/logistics/risk-assessment/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Flogistics%2Frisk-assessment%2Froute&page=%2Fapi%2Flogistics%2Frisk-assessment%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Flogistics%2Frisk-assessment%2Froute.js&appDir=C%3A%5CUsers%5Cmanas%5CDesktop%5CLogistics%20Sentry%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmanas%5CDesktop%5CLogistics%20Sentry&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Flogistics%2Frisk-assessment%2Froute&page=%2Fapi%2Flogistics%2Frisk-assessment%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Flogistics%2Frisk-assessment%2Froute.js&appDir=C%3A%5CUsers%5Cmanas%5CDesktop%5CLogistics%20Sentry%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmanas%5CDesktop%5CLogistics%20Sentry&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_manas_Desktop_Logistics_Sentry_src_app_api_logistics_risk_assessment_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/logistics/risk-assessment/route.js */ \"(rsc)/./src/app/api/logistics/risk-assessment/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/logistics/risk-assessment/route\",\n        pathname: \"/api/logistics/risk-assessment\",\n        filename: \"route\",\n        bundlePath: \"app/api/logistics/risk-assessment/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\manas\\\\Desktop\\\\Logistics Sentry\\\\src\\\\app\\\\api\\\\logistics\\\\risk-assessment\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_manas_Desktop_Logistics_Sentry_src_app_api_logistics_risk_assessment_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/logistics/risk-assessment/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZsb2dpc3RpY3MlMkZyaXNrLWFzc2Vzc21lbnQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmxvZ2lzdGljcyUyRnJpc2stYXNzZXNzbWVudCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmxvZ2lzdGljcyUyRnJpc2stYXNzZXNzbWVudCUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNtYW5hcyU1Q0Rlc2t0b3AlNUNMb2dpc3RpY3MlMjBTZW50cnklNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q21hbmFzJTVDRGVza3RvcCU1Q0xvZ2lzdGljcyUyMFNlbnRyeSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDZ0Q7QUFDN0g7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbnZlbnRvcnktcmlzay1hZ2VudC8/NTdmMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxtYW5hc1xcXFxEZXNrdG9wXFxcXExvZ2lzdGljcyBTZW50cnlcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcbG9naXN0aWNzXFxcXHJpc2stYXNzZXNzbWVudFxcXFxyb3V0ZS5qc1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvbG9naXN0aWNzL3Jpc2stYXNzZXNzbWVudC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2xvZ2lzdGljcy9yaXNrLWFzc2Vzc21lbnRcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2xvZ2lzdGljcy9yaXNrLWFzc2Vzc21lbnQvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxtYW5hc1xcXFxEZXNrdG9wXFxcXExvZ2lzdGljcyBTZW50cnlcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcbG9naXN0aWNzXFxcXHJpc2stYXNzZXNzbWVudFxcXFxyb3V0ZS5qc1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvbG9naXN0aWNzL3Jpc2stYXNzZXNzbWVudC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Flogistics%2Frisk-assessment%2Froute&page=%2Fapi%2Flogistics%2Frisk-assessment%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Flogistics%2Frisk-assessment%2Froute.js&appDir=C%3A%5CUsers%5Cmanas%5CDesktop%5CLogistics%20Sentry%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmanas%5CDesktop%5CLogistics%20Sentry&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/logistics/risk-assessment/route.js":
/*!********************************************************!*\
  !*** ./src/app/api/logistics/risk-assessment/route.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _lib_logistics_agent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/logistics/agent */ \"(rsc)/./src/lib/logistics/agent.js\");\n\nfunction normalizeRiskResult(result) {\n    if (!result || typeof result !== \"object\") {\n        return {\n            error: \"Invalid agent output.\",\n            risk_assessment: {\n                delay_risk: \"UNKNOWN\",\n                primary_cause: \"Unknown\",\n                confidence: 0\n            },\n            signals_detected: [],\n            recommended_action: \"ESCALATE\"\n        };\n    }\n    if (result.error) {\n        return {\n            ...result,\n            risk_assessment: result.risk_assessment || {\n                delay_risk: \"UNKNOWN\",\n                primary_cause: \"Unknown\",\n                confidence: 0\n            },\n            signals_detected: Array.isArray(result.signals_detected) ? result.signals_detected : [],\n            recommended_action: result.recommended_action || \"ESCALATE\",\n            analysis: result.analysis || {}\n        };\n    }\n    return {\n        ...result,\n        risk_assessment: result.risk_assessment || {\n            delay_risk: \"UNKNOWN\",\n            primary_cause: \"Unknown\",\n            confidence: 0\n        },\n        signals_detected: Array.isArray(result.signals_detected) ? result.signals_detected : [],\n        recommended_action: result.recommended_action || \"PAUSE\",\n        analysis: result.analysis || {}\n    };\n}\nasync function POST(req) {\n    try {\n        const body = await req.json();\n        const { origin_port, carrier, mode } = body;\n        if (!origin_port || !carrier) {\n            return new Response(JSON.stringify({\n                error: \"Missing required fields: origin_port, carrier\",\n                example: {\n                    origin_port: \"Port of Los Angeles\",\n                    carrier: \"Maersk\",\n                    mode: \"Sea\"\n                }\n            }), {\n                status: 400,\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n        }\n        const result = await (0,_lib_logistics_agent__WEBPACK_IMPORTED_MODULE_0__.assessDelayRisk)({\n            origin_port,\n            carrier,\n            mode\n        });\n        const normalized = normalizeRiskResult(result);\n        return new Response(JSON.stringify(normalized, null, 2), {\n            status: 200,\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n    } catch (error) {\n        return new Response(JSON.stringify({\n            error: error.message\n        }), {\n            status: 500,\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9sb2dpc3RpY3Mvcmlzay1hc3Nlc3NtZW50L3JvdXRlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXdEO0FBRXhELFNBQVNDLG9CQUFvQkMsTUFBTTtJQUMvQixJQUFJLENBQUNBLFVBQVUsT0FBT0EsV0FBVyxVQUFVO1FBQ3ZDLE9BQU87WUFDSEMsT0FBTztZQUNQQyxpQkFBaUI7Z0JBQUVDLFlBQVk7Z0JBQVdDLGVBQWU7Z0JBQVdDLFlBQVk7WUFBRTtZQUNsRkMsa0JBQWtCLEVBQUU7WUFDcEJDLG9CQUFvQjtRQUN4QjtJQUNKO0lBRUEsSUFBSVAsT0FBT0MsS0FBSyxFQUFFO1FBQ2QsT0FBTztZQUNILEdBQUdELE1BQU07WUFDVEUsaUJBQWlCRixPQUFPRSxlQUFlLElBQUk7Z0JBQUVDLFlBQVk7Z0JBQVdDLGVBQWU7Z0JBQVdDLFlBQVk7WUFBRTtZQUM1R0Msa0JBQWtCRSxNQUFNQyxPQUFPLENBQUNULE9BQU9NLGdCQUFnQixJQUFJTixPQUFPTSxnQkFBZ0IsR0FBRyxFQUFFO1lBQ3ZGQyxvQkFBb0JQLE9BQU9PLGtCQUFrQixJQUFJO1lBQ2pERyxVQUFVVixPQUFPVSxRQUFRLElBQUksQ0FBQztRQUNsQztJQUNKO0lBRUEsT0FBTztRQUNILEdBQUdWLE1BQU07UUFDVEUsaUJBQWlCRixPQUFPRSxlQUFlLElBQUk7WUFBRUMsWUFBWTtZQUFXQyxlQUFlO1lBQVdDLFlBQVk7UUFBRTtRQUM1R0Msa0JBQWtCRSxNQUFNQyxPQUFPLENBQUNULE9BQU9NLGdCQUFnQixJQUFJTixPQUFPTSxnQkFBZ0IsR0FBRyxFQUFFO1FBQ3ZGQyxvQkFBb0JQLE9BQU9PLGtCQUFrQixJQUFJO1FBQ2pERyxVQUFVVixPQUFPVSxRQUFRLElBQUksQ0FBQztJQUNsQztBQUNKO0FBRU8sZUFBZUMsS0FBS0MsR0FBRztJQUMxQixJQUFJO1FBQ0EsTUFBTUMsT0FBTyxNQUFNRCxJQUFJRSxJQUFJO1FBQzNCLE1BQU0sRUFBRUMsV0FBVyxFQUFFQyxPQUFPLEVBQUVDLElBQUksRUFBRSxHQUFHSjtRQUV2QyxJQUFJLENBQUNFLGVBQWUsQ0FBQ0MsU0FBUztZQUMxQixPQUFPLElBQUlFLFNBQVNDLEtBQUtDLFNBQVMsQ0FBQztnQkFDL0JuQixPQUFPO2dCQUNQb0IsU0FBUztvQkFBRU4sYUFBYTtvQkFBdUJDLFNBQVM7b0JBQVVDLE1BQU07Z0JBQU07WUFDbEYsSUFBSTtnQkFDQUssUUFBUTtnQkFDUkMsU0FBUztvQkFBRSxnQkFBZ0I7Z0JBQW1CO1lBQ2xEO1FBQ0o7UUFFQSxNQUFNdkIsU0FBUyxNQUFNRixxRUFBZUEsQ0FBQztZQUFFaUI7WUFBYUM7WUFBU0M7UUFBSztRQUNsRSxNQUFNTyxhQUFhekIsb0JBQW9CQztRQUV2QyxPQUFPLElBQUlrQixTQUFTQyxLQUFLQyxTQUFTLENBQUNJLFlBQVksTUFBTSxJQUFJO1lBQ3JERixRQUFRO1lBQ1JDLFNBQVM7Z0JBQUUsZ0JBQWdCO1lBQW1CO1FBQ2xEO0lBRUosRUFBRSxPQUFPdEIsT0FBTztRQUNaLE9BQU8sSUFBSWlCLFNBQVNDLEtBQUtDLFNBQVMsQ0FBQztZQUFFbkIsT0FBT0EsTUFBTXdCLE9BQU87UUFBQyxJQUFJO1lBQzFESCxRQUFRO1lBQ1JDLFNBQVM7Z0JBQUUsZ0JBQWdCO1lBQW1CO1FBQ2xEO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2ludmVudG9yeS1yaXNrLWFnZW50Ly4vc3JjL2FwcC9hcGkvbG9naXN0aWNzL3Jpc2stYXNzZXNzbWVudC9yb3V0ZS5qcz82MWY1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFzc2Vzc0RlbGF5UmlzayB9IGZyb20gXCJAL2xpYi9sb2dpc3RpY3MvYWdlbnRcIjtcclxuXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZVJpc2tSZXN1bHQocmVzdWx0KSB7XHJcbiAgICBpZiAoIXJlc3VsdCB8fCB0eXBlb2YgcmVzdWx0ICE9PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZXJyb3I6IFwiSW52YWxpZCBhZ2VudCBvdXRwdXQuXCIsXHJcbiAgICAgICAgICAgIHJpc2tfYXNzZXNzbWVudDogeyBkZWxheV9yaXNrOiBcIlVOS05PV05cIiwgcHJpbWFyeV9jYXVzZTogXCJVbmtub3duXCIsIGNvbmZpZGVuY2U6IDAgfSxcclxuICAgICAgICAgICAgc2lnbmFsc19kZXRlY3RlZDogW10sXHJcbiAgICAgICAgICAgIHJlY29tbWVuZGVkX2FjdGlvbjogXCJFU0NBTEFURVwiXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocmVzdWx0LmVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgLi4ucmVzdWx0LFxyXG4gICAgICAgICAgICByaXNrX2Fzc2Vzc21lbnQ6IHJlc3VsdC5yaXNrX2Fzc2Vzc21lbnQgfHwgeyBkZWxheV9yaXNrOiBcIlVOS05PV05cIiwgcHJpbWFyeV9jYXVzZTogXCJVbmtub3duXCIsIGNvbmZpZGVuY2U6IDAgfSxcclxuICAgICAgICAgICAgc2lnbmFsc19kZXRlY3RlZDogQXJyYXkuaXNBcnJheShyZXN1bHQuc2lnbmFsc19kZXRlY3RlZCkgPyByZXN1bHQuc2lnbmFsc19kZXRlY3RlZCA6IFtdLFxyXG4gICAgICAgICAgICByZWNvbW1lbmRlZF9hY3Rpb246IHJlc3VsdC5yZWNvbW1lbmRlZF9hY3Rpb24gfHwgXCJFU0NBTEFURVwiLFxyXG4gICAgICAgICAgICBhbmFseXNpczogcmVzdWx0LmFuYWx5c2lzIHx8IHt9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIC4uLnJlc3VsdCxcclxuICAgICAgICByaXNrX2Fzc2Vzc21lbnQ6IHJlc3VsdC5yaXNrX2Fzc2Vzc21lbnQgfHwgeyBkZWxheV9yaXNrOiBcIlVOS05PV05cIiwgcHJpbWFyeV9jYXVzZTogXCJVbmtub3duXCIsIGNvbmZpZGVuY2U6IDAgfSxcclxuICAgICAgICBzaWduYWxzX2RldGVjdGVkOiBBcnJheS5pc0FycmF5KHJlc3VsdC5zaWduYWxzX2RldGVjdGVkKSA/IHJlc3VsdC5zaWduYWxzX2RldGVjdGVkIDogW10sXHJcbiAgICAgICAgcmVjb21tZW5kZWRfYWN0aW9uOiByZXN1bHQucmVjb21tZW5kZWRfYWN0aW9uIHx8IFwiUEFVU0VcIixcclxuICAgICAgICBhbmFseXNpczogcmVzdWx0LmFuYWx5c2lzIHx8IHt9XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXEpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcS5qc29uKCk7XHJcbiAgICAgICAgY29uc3QgeyBvcmlnaW5fcG9ydCwgY2FycmllciwgbW9kZSB9ID0gYm9keTtcclxuXHJcbiAgICAgICAgaWYgKCFvcmlnaW5fcG9ydCB8fCAhY2Fycmllcikge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIGVycm9yOiBcIk1pc3NpbmcgcmVxdWlyZWQgZmllbGRzOiBvcmlnaW5fcG9ydCwgY2FycmllclwiLFxyXG4gICAgICAgICAgICAgICAgZXhhbXBsZTogeyBvcmlnaW5fcG9ydDogXCJQb3J0IG9mIExvcyBBbmdlbGVzXCIsIGNhcnJpZXI6IFwiTWFlcnNrXCIsIG1vZGU6IFwiU2VhXCIgfVxyXG4gICAgICAgICAgICB9KSwge1xyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiA0MDAsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhc3Nlc3NEZWxheVJpc2soeyBvcmlnaW5fcG9ydCwgY2FycmllciwgbW9kZSB9KTtcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplUmlza1Jlc3VsdChyZXN1bHQpO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KG5vcm1hbGl6ZWQsIG51bGwsIDIpLCB7XHJcbiAgICAgICAgICAgIHN0YXR1czogMjAwLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KSwge1xyXG4gICAgICAgICAgICBzdGF0dXM6IDUwMCxcclxuICAgICAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImFzc2Vzc0RlbGF5UmlzayIsIm5vcm1hbGl6ZVJpc2tSZXN1bHQiLCJyZXN1bHQiLCJlcnJvciIsInJpc2tfYXNzZXNzbWVudCIsImRlbGF5X3Jpc2siLCJwcmltYXJ5X2NhdXNlIiwiY29uZmlkZW5jZSIsInNpZ25hbHNfZGV0ZWN0ZWQiLCJyZWNvbW1lbmRlZF9hY3Rpb24iLCJBcnJheSIsImlzQXJyYXkiLCJhbmFseXNpcyIsIlBPU1QiLCJyZXEiLCJib2R5IiwianNvbiIsIm9yaWdpbl9wb3J0IiwiY2FycmllciIsIm1vZGUiLCJSZXNwb25zZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJleGFtcGxlIiwic3RhdHVzIiwiaGVhZGVycyIsIm5vcm1hbGl6ZWQiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/logistics/risk-assessment/route.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/logistics/agent.js":
/*!************************************!*\
  !*** ./src/lib/logistics/agent.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assessDelayRisk: () => (/* binding */ assessDelayRisk)\n/* harmony export */ });\n/* harmony import */ var _mino__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../mino */ \"(rsc)/./src/lib/mino.js\");\n\n// --- STAGE 1: SOURCE DISCOVERY (KNOWLEDGE BASE) ---\n// In a production system, this would be an LLM or specific search agent.\n// For the Proof of Concept, we map known high-traffic nodes.\nconst SOURCE_KNOWLEDGE_BASE = {\n    ports: {\n        \"Port of Los Angeles\": [\n            {\n                name: \"Port of LA - Operations Updates\",\n                url: \"https://www.portoflosangeles.org\",\n                type: \"port_authority\"\n            },\n            {\n                name: \"MarineTraffic - Port Congestion (LA)\",\n                url: \"https://www.marinetraffic.com/en/ais/details/ports/154/USA_port:LOS%20ANGELES\",\n                type: \"congestion_data\"\n            }\n        ],\n        \"Shanghai\": [\n            {\n                name: \"Shanghai International Port Group\",\n                url: \"http://www.portshanghai.com.cn/en/\",\n                type: \"port_authority\"\n            }\n        ],\n        \"Mumbai\": [\n            {\n                name: \"Mumbai Port Authority\",\n                url: \"https://mumbaiport.gov.in\",\n                type: \"port_authority\"\n            }\n        ]\n    },\n    carriers: {\n        \"Maersk\": [\n            {\n                name: \"Maersk Network Advisories\",\n                url: \"https://www.maersk.com/news/advisories\",\n                type: \"carrier_advisory\"\n            }\n        ],\n        \"MSC\": [\n            {\n                name: \"MSC Customer Advisories\",\n                url: \"https://www.msc.com/en/newsroom/customer-advisories\",\n                type: \"carrier_advisory\"\n            }\n        ],\n        \"CMA CGM\": [\n            {\n                name: \"CMA CGM News & Advisories\",\n                url: \"https://www.cma-cgm.com/news\",\n                type: \"carrier_advisory\"\n            }\n        ]\n    }\n};\nfunction buildDiscoverySources(origin_port, carrier) {\n    const sources = [];\n    if (origin_port) {\n        const portQuery = encodeURIComponent(`${origin_port} port authority operations status`);\n        sources.push({\n            name: `Discovery: ${origin_port} Port Authority`,\n            url: `https://duckduckgo.com/html/?q=${portQuery}`,\n            type: \"custom_discovery\",\n            goal: `\r\n### MISSION: PORT AUTHORITY INTELLIGENCE DISCOVERY\r\nTARGET: ${origin_port}\r\n\r\nYou are a Logistics Intelligence Scout. Your job is to locate the official port authority or terminal operations page for ${origin_port}, then extract operational status signals.\r\n\r\n### INSTRUCTIONS:\r\n1. Search for the official port authority or terminal operations page for ${origin_port}.\r\n2. Navigate to the official source and look for operational updates, advisories, or congestion metrics.\r\n3. Extract specific metrics/quotes with dates where possible.\r\n\r\n### REQUIRED OUTPUT (JSON ONLY):\r\n{\r\n  \"scan_status\": \"completed\",\r\n  \"operational_status\": \"NORMAL\" | \"DISRUPTED\" | \"UNKNOWN\",\r\n  \"signals\": [\r\n    {\r\n      \"summary\": \"Detailed finding with numbers/quotes if available\",\r\n      \"severity\": \"LOW\" | \"MEDIUM\" | \"HIGH\",\r\n      \"date\": \"YYYY-MM-DD\",\r\n      \"category\": \"METRIC\" | \"QUOTE\" | \"STATUS\"\r\n    }\r\n  ]\r\n}\r\n`\n        });\n    }\n    if (carrier) {\n        const carrierQuery = encodeURIComponent(`${carrier} customer advisories`);\n        sources.push({\n            name: `Discovery: ${carrier} Advisories`,\n            url: `https://duckduckgo.com/html/?q=${carrierQuery}`,\n            type: \"custom_discovery\",\n            goal: `\r\n### MISSION: CARRIER ADVISORY INTELLIGENCE DISCOVERY\r\nTARGET: ${carrier}\r\n\r\nYou are a Logistics Intelligence Scout. Your job is to locate ${carrier}'s official customer advisories or operations updates page, then extract operational signals.\r\n\r\n### INSTRUCTIONS:\r\n1. Find the official ${carrier} advisories/alerts/newsroom page.\r\n2. Navigate to the most recent advisories and extract concrete metrics or dates.\r\n3. Prefer official carrier sources over third-party news.\r\n\r\n### REQUIRED OUTPUT (JSON ONLY):\r\n{\r\n  \"scan_status\": \"completed\",\r\n  \"operational_status\": \"NORMAL\" | \"DISRUPTED\" | \"UNKNOWN\",\r\n  \"signals\": [\r\n    {\r\n      \"summary\": \"Detailed finding with numbers/quotes if available\",\r\n      \"severity\": \"LOW\" | \"MEDIUM\" | \"HIGH\",\r\n      \"date\": \"YYYY-MM-DD\",\r\n      \"category\": \"METRIC\" | \"QUOTE\" | \"STATUS\"\r\n    }\r\n  ]\r\n}\r\n`\n        });\n    }\n    return sources;\n}\n// --- STAGE 2: PARALLEL AGENT EXECUTION ---\nfunction createSseParser(onEvent) {\n    let buffer = \"\";\n    return (chunk)=>{\n        buffer += chunk;\n        const parts = buffer.split(\"\\n\\n\");\n        buffer = parts.pop() || \"\";\n        for (const part of parts){\n            const lines = part.split(\"\\n\");\n            for (const line of lines){\n                if (!line.startsWith(\"data: \")) continue;\n                const payload = line.slice(6).trim();\n                if (!payload) continue;\n                try {\n                    const data = JSON.parse(payload);\n                    onEvent(data);\n                } catch (e) {\n                // Ignore partial JSON or non-JSON heartbeats.\n                }\n            }\n        }\n    };\n}\nasync function analyzeSource(source) {\n    const defaultGoal = `\r\n### MISSION: DEEP INTELLIGENCE EXTRACTION\r\nTARGET URL: ${source.url}\r\n\r\nYou are a Logistics Intelligence Scout. Your job is to extract DETAILED operational intelligence from this page.\r\n\r\n### INSTRUCTIONS:\r\n1. Scan for specific **METRICS** (e.g., \"Wait time: 3 days\", \"Anchored vessels: 12\", \"Gate turn time: 45 min\", \"Advisory #2024-05\").\r\n2. Extract **DIRECT QUOTES** from headers or alerts that describe the situation.\r\n3. Identify **DATES** of specific upcoming disruptions (strikes, holidays, maintenance).\r\n4. If operations are normal, extract the text that *says* they are normal (e.g., \"All terminals open\", \"No delays reported\").\r\n5. DO NOT be vague. \"Congestion\" is bad. \"Congestion: 5 day delay\" is good.\r\n\r\n### REQUIRED OUTPUT (JSON ONLY):\r\n{\r\n  \"scan_status\": \"completed\",\r\n  \"operational_status\": \"NORMAL\" | \"DISRUPTED\" | \"UNKNOWN\",\r\n  \"signals\": [\r\n    {\r\n      \"summary\": \"Detailed finding with numbers/quotes if avaiable\",\r\n      \"severity\": \"LOW\" | \"MEDIUM\" | \"HIGH\",\r\n      \"date\": \"YYYY-MM-DD\",\r\n      \"category\": \"METRIC\" | \"QUOTE\" | \"STATUS\"\r\n    }\r\n  ]\r\n}\r\n`;\n    const startedAt = Date.now();\n    const timeoutAttempts = source.type === \"custom_discovery\" ? [\n        60000,\n        90000\n    ] : [\n        45000,\n        60000\n    ];\n    let lastError = null;\n    console.log(`[Agent] Scouting ${source.name}...`);\n    for(let attempt = 0; attempt < timeoutAttempts.length; attempt++){\n        const controller = new AbortController();\n        const timeoutId = setTimeout(()=>controller.abort(), timeoutAttempts[attempt]);\n        try {\n            const goal = source.goal || defaultGoal;\n            const stream = await (0,_mino__WEBPACK_IMPORTED_MODULE_0__.runGenericAgent)(source.url, goal, {\n                signal: controller.signal\n            });\n            const reader = stream.getReader();\n            const decoder = new TextDecoder();\n            let finalResult = null;\n            const parse = createSseParser((data)=>{\n                if (data.final_result) {\n                    finalResult = data.final_result;\n                }\n            });\n            while(true){\n                const { done, value } = await reader.read();\n                if (done) break;\n                const chunk = decoder.decode(value, {\n                    stream: true\n                });\n                parse(chunk);\n            }\n            return {\n                source: source.name,\n                findings: finalResult,\n                duration_ms: Date.now() - startedAt,\n                attempts: attempt + 1\n            };\n        } catch (error) {\n            lastError = error;\n            if (error.name !== \"AbortError\") break;\n        } finally{\n            clearTimeout(timeoutId);\n        }\n    }\n    console.error(`[Agent] Failed to analyze ${source.name}:`, lastError);\n    return {\n        source: source.name,\n        error: lastError?.name === \"AbortError\" ? \"Analysis timed out\" : lastError?.message,\n        duration_ms: Date.now() - startedAt,\n        attempts: timeoutAttempts.length,\n        error_at: new Date().toISOString()\n    };\n}\n// --- STAGE 3: SYNTHESIS & REASONING ---\nfunction synthesizeRisk(context, findings) {\n    let riskScore = 0;\n    let signals = [];\n    let primaryCauses = new Set();\n    let severityCounts = {\n        HIGH: 0,\n        MEDIUM: 0,\n        LOW: 0\n    };\n    let categoryCounts = {\n        METRIC: 0,\n        QUOTE: 0,\n        STATUS: 0\n    };\n    let recencyBuckets = {\n        recent: 0,\n        stale: 0,\n        unknown: 0\n    };\n    let signalDates = [];\n    findings.forEach((f)=>{\n        if (f.findings && f.findings.signals) {\n            f.findings.signals.forEach((s)=>{\n                // Formatting the signal text to be more readable if it's a metric\n                let formattedSignal = s.summary;\n                if (s.category === \"METRIC\") formattedSignal = `[METRIC] ${s.summary}`;\n                if (s.category === \"QUOTE\") formattedSignal = `\"${s.summary}\"`;\n                signals.push({\n                    source: f.source,\n                    signal: formattedSignal,\n                    date: s.date || \"Just now\",\n                    severity: s.severity\n                });\n                if (s.severity === \"HIGH\") riskScore += 50;\n                if (s.severity === \"MEDIUM\") riskScore += 20;\n                if (s.severity === \"LOW\") riskScore += 0; // Low doesn't increase risk, but provides context\n                if (severityCounts[s.severity] !== undefined) severityCounts[s.severity] += 1;\n                if (categoryCounts[s.category] !== undefined) categoryCounts[s.category] += 1;\n                if (s.date) {\n                    signalDates.push(s.date);\n                    const parsed = Date.parse(s.date);\n                    if (Number.isFinite(parsed)) {\n                        const ageDays = (Date.now() - parsed) / (1000 * 60 * 60 * 24);\n                        if (ageDays <= 14) recencyBuckets.recent += 1;\n                        else recencyBuckets.stale += 1;\n                    } else {\n                        recencyBuckets.unknown += 1;\n                    }\n                } else {\n                    recencyBuckets.unknown += 1;\n                }\n                if (s.severity !== \"LOW\") {\n                    // Try to infer cause from summary keywords\n                    const text = s.summary.toLowerCase();\n                    if (text.includes(\"congestion\") || text.includes(\"anchor\") || text.includes(\"dweel\")) primaryCauses.add(\"CONGESTION\");\n                    if (text.includes(\"strike\") || text.includes(\"labor\") || text.includes(\"union\")) primaryCauses.add(\"LABOR\");\n                    if (text.includes(\"weather\") || text.includes(\"storm\") || text.includes(\"fog\") || text.includes(\"wind\")) primaryCauses.add(\"WEATHER\");\n                    if (text.includes(\"maintenance\") || text.includes(\"outage\")) primaryCauses.add(\"TECHNICAL\");\n                }\n            });\n        } else if (f.error) {\n            const errorDate = f.error_at || new Date().toISOString();\n            signals.push({\n                source: f.source,\n                signal: \"Connection timed out during deep scan.\",\n                date: errorDate,\n                severity: \"LOW\"\n            });\n            severityCounts.LOW += 1;\n            categoryCounts.STATUS += 1;\n            signalDates.push(errorDate);\n            recencyBuckets.unknown += 1;\n        } else {\n            // Fallback for empty findings (likely normal)\n            const fallbackDate = new Date().toISOString();\n            signals.push({\n                source: f.source,\n                signal: \"Verified: No negative operational constraints found.\",\n                date: fallbackDate,\n                severity: \"LOW\"\n            });\n            severityCounts.LOW += 1;\n            categoryCounts.STATUS += 1;\n            signalDates.push(fallbackDate);\n            recencyBuckets.unknown += 1;\n        }\n    });\n    let riskLevel = \"LOW\";\n    if (riskScore >= 50) riskLevel = \"HIGH\";\n    else if (riskScore >= 20) riskLevel = \"MEDIUM\";\n    let confidence = 0.85;\n    const causes = Array.from(primaryCauses).join(\" + \");\n    const normalizedRiskScore = Math.min(100, Math.max(0, riskScore));\n    const sourceTimings = findings.filter((f)=>typeof f.duration_ms === \"number\").map((f)=>({\n            source: f.source,\n            duration_ms: f.duration_ms\n        }));\n    const totalSignals = signals.length;\n    const signalDensity = totalSignals > 0 ? totalSignals / Math.max(1, findings.length) : 0;\n    const latestSignalDate = signalDates.length > 0 ? signalDates.sort().slice(-1)[0] : null;\n    // Generate specific recommendation\n    let action = \"Network operating normally. Continue standard monitoring.\";\n    if (riskLevel === \"HIGH\") {\n        if (causes.includes(\"LABOR\")) action = \"CRITICAL: Divert cargo immediately. Labor action confirmed.\";\n        else if (causes.includes(\"WEATHER\")) action = \"Schedule slide inevitable. Notify customers of delay.\";\n        else action = \"High risk detected. Contact carrier representative.\";\n    } else if (riskLevel === \"MEDIUM\") {\n        if (causes.includes(\"CONGESTION\")) action = \"Anticipate 2-4 day berthing delay. Monitor vessel position.\";\n        else action = \"Monitor closely. Minor disruptions reported.\";\n    }\n    const severityTotal = severityCounts.HIGH + severityCounts.MEDIUM + severityCounts.LOW;\n    const severityWeight = severityTotal > 0 ? (severityCounts.HIGH * 1 + severityCounts.MEDIUM * 0.6 + severityCounts.LOW * 0.2) / severityTotal : 0.2;\n    const recencyTotal = recencyBuckets.recent + recencyBuckets.stale + recencyBuckets.unknown;\n    const recencyWeight = recencyTotal > 0 ? (recencyBuckets.recent * 1 + recencyBuckets.stale * 0.4 + recencyBuckets.unknown * 0.6) / recencyTotal : 0.6;\n    const successfulSources = findings.filter((f)=>f.findings && f.findings.signals).length;\n    const coverageWeight = findings.length > 0 ? Math.min(1, successfulSources / findings.length) : 0.4;\n    const confidenceWeighted = Math.min(0.99, Math.max(0.2, severityWeight * 0.4 + recencyWeight * 0.35 + coverageWeight * 0.25));\n    confidence = Math.min(confidence, confidenceWeighted);\n    const summary = [\n        `Risk ${riskLevel}`,\n        causes ? `Causes: ${causes}` : \"Causes: Normal Operations\",\n        `Signals: ${signals.length}`,\n        `Recent: ${recencyBuckets.recent}, Stale: ${recencyBuckets.stale}`\n    ].join(\" â€¢ \");\n    return {\n        shipment_context: context,\n        risk_assessment: {\n            delay_risk: riskLevel,\n            primary_cause: causes || \"Normal Operations\",\n            confidence: Math.min(0.99, confidence)\n        },\n        analysis: {\n            risk_score: normalizedRiskScore,\n            evidence_counts: {\n                severity: severityCounts,\n                category: categoryCounts\n            },\n            source_timings: sourceTimings,\n            signal_density: Number(signalDensity.toFixed(2)),\n            recency: {\n                buckets: recencyBuckets,\n                latest_signal_date: latestSignalDate\n            },\n            confidence_breakdown: {\n                weighted_confidence: Number(confidenceWeighted.toFixed(2)),\n                severity_weight: Number(severityWeight.toFixed(2)),\n                recency_weight: Number(recencyWeight.toFixed(2)),\n                coverage_weight: Number(coverageWeight.toFixed(2))\n            },\n            summary\n        },\n        signals_detected: signals,\n        recommended_action: action\n    };\n}\n// --- MAIN ENTRY POINT ---\nasync function assessDelayRisk(context) {\n    const startedAt = Date.now();\n    const { origin_port, carrier, mode } = context;\n    // 1. Discover\n    let sources = [\n        ...SOURCE_KNOWLEDGE_BASE.ports[origin_port] || [],\n        ...SOURCE_KNOWLEDGE_BASE.carriers[carrier] || []\n    ];\n    let discoveryUsed = false;\n    if (sources.length === 0) {\n        sources = buildDiscoverySources(origin_port, carrier);\n        discoveryUsed = sources.length > 0;\n        if (!discoveryUsed) {\n            return {\n                error: \"No intelligent sources found for this context.\",\n                supported_origins: Object.keys(SOURCE_KNOWLEDGE_BASE.ports),\n                supported_carriers: Object.keys(SOURCE_KNOWLEDGE_BASE.carriers)\n            };\n        }\n    }\n    // 2. Parallel Actions\n    console.log(`[Orchestrator] Launching ${sources.length} agents for ${origin_port} / ${carrier}...`);\n    const results = await Promise.all(sources.map((s)=>analyzeSource(s)));\n    // 3. Synthesis\n    const synthesized = synthesizeRisk({\n        ...context,\n        discovery_used: discoveryUsed\n    }, results);\n    return {\n        ...synthesized,\n        analysis: {\n            ...synthesized.analysis,\n            total_duration_ms: Date.now() - startedAt\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1dBQzlDUCxzQkFBc0JLLFFBQVEsQ0FBQ0csUUFBUSxJQUFJLEVBQUU7S0FDcEQ7SUFFRCxJQUFJbUosZ0JBQWdCO0lBQ3BCLElBQUlsSixRQUFRbUMsTUFBTSxLQUFLLEdBQUc7UUFDdEJuQyxVQUFVSCxzQkFBc0JDLGFBQWFDO1FBQzdDbUosZ0JBQWdCbEosUUFBUW1DLE1BQU0sR0FBRztRQUNqQyxJQUFJLENBQUMrRyxlQUFlO1lBQ2hCLE9BQU87Z0JBQ0gxRixPQUFPO2dCQUNQMkYsbUJBQW1CQyxPQUFPQyxJQUFJLENBQUM5SixzQkFBc0JDLEtBQUs7Z0JBQzFEOEosb0JBQW9CRixPQUFPQyxJQUFJLENBQUM5SixzQkFBc0JLLFFBQVE7WUFDbEU7UUFDSjtJQUNKO0lBRUEsc0JBQXNCO0lBQ3RCb0MsUUFBUUMsR0FBRyxDQUFDLENBQUMseUJBQXlCLEVBQUVqQyxRQUFRbUMsTUFBTSxDQUFDLFlBQVksRUFBRXJDLFlBQVksR0FBRyxFQUFFQyxRQUFRLEdBQUcsQ0FBQztJQUNsRyxNQUFNd0osVUFBVSxNQUFNQyxRQUFRQyxHQUFHLENBQUN6SixRQUFRK0csR0FBRyxDQUFDN0IsQ0FBQUEsSUFBSzFELGNBQWMwRDtJQUVqRSxlQUFlO0lBQ2YsTUFBTXdFLGNBQWM3RixlQUFlO1FBQUUsR0FBR0MsT0FBTztRQUFFNkYsZ0JBQWdCVDtJQUFjLEdBQUdLO0lBQ2xGLE9BQU87UUFDSCxHQUFHRyxXQUFXO1FBQ2QxQixVQUFVO1lBQ04sR0FBRzBCLFlBQVkxQixRQUFRO1lBQ3ZCNEIsbUJBQW1CaEksS0FBS0MsR0FBRyxLQUFLRjtRQUNwQztJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbnZlbnRvcnktcmlzay1hZ2VudC8uL3NyYy9saWIvbG9naXN0aWNzL2FnZW50LmpzPzgzMDIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcnVuR2VuZXJpY0FnZW50IH0gZnJvbSBcIi4uL21pbm9cIjtcclxuXHJcbi8vIC0tLSBTVEFHRSAxOiBTT1VSQ0UgRElTQ09WRVJZIChLTk9XTEVER0UgQkFTRSkgLS0tXHJcbi8vIEluIGEgcHJvZHVjdGlvbiBzeXN0ZW0sIHRoaXMgd291bGQgYmUgYW4gTExNIG9yIHNwZWNpZmljIHNlYXJjaCBhZ2VudC5cclxuLy8gRm9yIHRoZSBQcm9vZiBvZiBDb25jZXB0LCB3ZSBtYXAga25vd24gaGlnaC10cmFmZmljIG5vZGVzLlxyXG5jb25zdCBTT1VSQ0VfS05PV0xFREdFX0JBU0UgPSB7XHJcbiAgICBwb3J0czoge1xyXG4gICAgICAgIFwiUG9ydCBvZiBMb3MgQW5nZWxlc1wiOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwiUG9ydCBvZiBMQSAtIE9wZXJhdGlvbnMgVXBkYXRlc1wiLFxyXG4gICAgICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vd3d3LnBvcnRvZmxvc2FuZ2VsZXMub3JnXCIsIC8vIE1haW4gcGFnZSB1c3VhbGx5IGhhcyBhbGVydHNcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwicG9ydF9hdXRob3JpdHlcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcIk1hcmluZVRyYWZmaWMgLSBQb3J0IENvbmdlc3Rpb24gKExBKVwiLFxyXG4gICAgICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vd3d3Lm1hcmluZXRyYWZmaWMuY29tL2VuL2Fpcy9kZXRhaWxzL3BvcnRzLzE1NC9VU0FfcG9ydDpMT1MlMjBBTkdFTEVTXCIsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcImNvbmdlc3Rpb25fZGF0YVwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdLFxyXG4gICAgICAgIFwiU2hhbmdoYWlcIjogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcIlNoYW5naGFpIEludGVybmF0aW9uYWwgUG9ydCBHcm91cFwiLFxyXG4gICAgICAgICAgICAgICAgdXJsOiBcImh0dHA6Ly93d3cucG9ydHNoYW5naGFpLmNvbS5jbi9lbi9cIixcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwicG9ydF9hdXRob3JpdHlcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXSxcclxuICAgICAgICBcIk11bWJhaVwiOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwiTXVtYmFpIFBvcnQgQXV0aG9yaXR5XCIsXHJcbiAgICAgICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9tdW1iYWlwb3J0Lmdvdi5pblwiLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJwb3J0X2F1dGhvcml0eVwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdXHJcbiAgICB9LFxyXG4gICAgY2FycmllcnM6IHtcclxuICAgICAgICBcIk1hZXJza1wiOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwiTWFlcnNrIE5ldHdvcmsgQWR2aXNvcmllc1wiLFxyXG4gICAgICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vd3d3Lm1hZXJzay5jb20vbmV3cy9hZHZpc29yaWVzXCIsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcImNhcnJpZXJfYWR2aXNvcnlcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXSxcclxuICAgICAgICBcIk1TQ1wiOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwiTVNDIEN1c3RvbWVyIEFkdmlzb3JpZXNcIixcclxuICAgICAgICAgICAgICAgIHVybDogXCJodHRwczovL3d3dy5tc2MuY29tL2VuL25ld3Nyb29tL2N1c3RvbWVyLWFkdmlzb3JpZXNcIixcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiY2Fycmllcl9hZHZpc29yeVwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdLFxyXG4gICAgICAgIFwiQ01BIENHTVwiOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwiQ01BIENHTSBOZXdzICYgQWR2aXNvcmllc1wiLFxyXG4gICAgICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vd3d3LmNtYS1jZ20uY29tL25ld3NcIixcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiY2Fycmllcl9hZHZpc29yeVwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdXHJcbiAgICB9XHJcbiAgICAvLyBDb250ZXh0dWFsIHNvdXJjZXMgbGlrZSBXZWF0aGVyIG9yIExhYm9yIGdlbmVyaWMgc2l0ZXMgY291bGQgYmUgYWRkZWRcclxufTtcclxuXHJcbmZ1bmN0aW9uIGJ1aWxkRGlzY292ZXJ5U291cmNlcyhvcmlnaW5fcG9ydCwgY2Fycmllcikge1xyXG4gICAgY29uc3Qgc291cmNlcyA9IFtdO1xyXG4gICAgaWYgKG9yaWdpbl9wb3J0KSB7XHJcbiAgICAgICAgY29uc3QgcG9ydFF1ZXJ5ID0gZW5jb2RlVVJJQ29tcG9uZW50KGAke29yaWdpbl9wb3J0fSBwb3J0IGF1dGhvcml0eSBvcGVyYXRpb25zIHN0YXR1c2ApO1xyXG4gICAgICAgIHNvdXJjZXMucHVzaCh7XHJcbiAgICAgICAgICAgIG5hbWU6IGBEaXNjb3Zlcnk6ICR7b3JpZ2luX3BvcnR9IFBvcnQgQXV0aG9yaXR5YCxcclxuICAgICAgICAgICAgdXJsOiBgaHR0cHM6Ly9kdWNrZHVja2dvLmNvbS9odG1sLz9xPSR7cG9ydFF1ZXJ5fWAsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiY3VzdG9tX2Rpc2NvdmVyeVwiLFxyXG4gICAgICAgICAgICBnb2FsOiBgXHJcbiMjIyBNSVNTSU9OOiBQT1JUIEFVVEhPUklUWSBJTlRFTExJR0VOQ0UgRElTQ09WRVJZXHJcblRBUkdFVDogJHtvcmlnaW5fcG9ydH1cclxuXHJcbllvdSBhcmUgYSBMb2dpc3RpY3MgSW50ZWxsaWdlbmNlIFNjb3V0LiBZb3VyIGpvYiBpcyB0byBsb2NhdGUgdGhlIG9mZmljaWFsIHBvcnQgYXV0aG9yaXR5IG9yIHRlcm1pbmFsIG9wZXJhdGlvbnMgcGFnZSBmb3IgJHtvcmlnaW5fcG9ydH0sIHRoZW4gZXh0cmFjdCBvcGVyYXRpb25hbCBzdGF0dXMgc2lnbmFscy5cclxuXHJcbiMjIyBJTlNUUlVDVElPTlM6XHJcbjEuIFNlYXJjaCBmb3IgdGhlIG9mZmljaWFsIHBvcnQgYXV0aG9yaXR5IG9yIHRlcm1pbmFsIG9wZXJhdGlvbnMgcGFnZSBmb3IgJHtvcmlnaW5fcG9ydH0uXHJcbjIuIE5hdmlnYXRlIHRvIHRoZSBvZmZpY2lhbCBzb3VyY2UgYW5kIGxvb2sgZm9yIG9wZXJhdGlvbmFsIHVwZGF0ZXMsIGFkdmlzb3JpZXMsIG9yIGNvbmdlc3Rpb24gbWV0cmljcy5cclxuMy4gRXh0cmFjdCBzcGVjaWZpYyBtZXRyaWNzL3F1b3RlcyB3aXRoIGRhdGVzIHdoZXJlIHBvc3NpYmxlLlxyXG5cclxuIyMjIFJFUVVJUkVEIE9VVFBVVCAoSlNPTiBPTkxZKTpcclxue1xyXG4gIFwic2Nhbl9zdGF0dXNcIjogXCJjb21wbGV0ZWRcIixcclxuICBcIm9wZXJhdGlvbmFsX3N0YXR1c1wiOiBcIk5PUk1BTFwiIHwgXCJESVNSVVBURURcIiB8IFwiVU5LTk9XTlwiLFxyXG4gIFwic2lnbmFsc1wiOiBbXHJcbiAgICB7XHJcbiAgICAgIFwic3VtbWFyeVwiOiBcIkRldGFpbGVkIGZpbmRpbmcgd2l0aCBudW1iZXJzL3F1b3RlcyBpZiBhdmFpbGFibGVcIixcclxuICAgICAgXCJzZXZlcml0eVwiOiBcIkxPV1wiIHwgXCJNRURJVU1cIiB8IFwiSElHSFwiLFxyXG4gICAgICBcImRhdGVcIjogXCJZWVlZLU1NLUREXCIsXHJcbiAgICAgIFwiY2F0ZWdvcnlcIjogXCJNRVRSSUNcIiB8IFwiUVVPVEVcIiB8IFwiU1RBVFVTXCJcclxuICAgIH1cclxuICBdXHJcbn1cclxuYFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGNhcnJpZXIpIHtcclxuICAgICAgICBjb25zdCBjYXJyaWVyUXVlcnkgPSBlbmNvZGVVUklDb21wb25lbnQoYCR7Y2Fycmllcn0gY3VzdG9tZXIgYWR2aXNvcmllc2ApO1xyXG4gICAgICAgIHNvdXJjZXMucHVzaCh7XHJcbiAgICAgICAgICAgIG5hbWU6IGBEaXNjb3Zlcnk6ICR7Y2Fycmllcn0gQWR2aXNvcmllc2AsXHJcbiAgICAgICAgICAgIHVybDogYGh0dHBzOi8vZHVja2R1Y2tnby5jb20vaHRtbC8/cT0ke2NhcnJpZXJRdWVyeX1gLFxyXG4gICAgICAgICAgICB0eXBlOiBcImN1c3RvbV9kaXNjb3ZlcnlcIixcclxuICAgICAgICAgICAgZ29hbDogYFxyXG4jIyMgTUlTU0lPTjogQ0FSUklFUiBBRFZJU09SWSBJTlRFTExJR0VOQ0UgRElTQ09WRVJZXHJcblRBUkdFVDogJHtjYXJyaWVyfVxyXG5cclxuWW91IGFyZSBhIExvZ2lzdGljcyBJbnRlbGxpZ2VuY2UgU2NvdXQuIFlvdXIgam9iIGlzIHRvIGxvY2F0ZSAke2NhcnJpZXJ9J3Mgb2ZmaWNpYWwgY3VzdG9tZXIgYWR2aXNvcmllcyBvciBvcGVyYXRpb25zIHVwZGF0ZXMgcGFnZSwgdGhlbiBleHRyYWN0IG9wZXJhdGlvbmFsIHNpZ25hbHMuXHJcblxyXG4jIyMgSU5TVFJVQ1RJT05TOlxyXG4xLiBGaW5kIHRoZSBvZmZpY2lhbCAke2NhcnJpZXJ9IGFkdmlzb3JpZXMvYWxlcnRzL25ld3Nyb29tIHBhZ2UuXHJcbjIuIE5hdmlnYXRlIHRvIHRoZSBtb3N0IHJlY2VudCBhZHZpc29yaWVzIGFuZCBleHRyYWN0IGNvbmNyZXRlIG1ldHJpY3Mgb3IgZGF0ZXMuXHJcbjMuIFByZWZlciBvZmZpY2lhbCBjYXJyaWVyIHNvdXJjZXMgb3ZlciB0aGlyZC1wYXJ0eSBuZXdzLlxyXG5cclxuIyMjIFJFUVVJUkVEIE9VVFBVVCAoSlNPTiBPTkxZKTpcclxue1xyXG4gIFwic2Nhbl9zdGF0dXNcIjogXCJjb21wbGV0ZWRcIixcclxuICBcIm9wZXJhdGlvbmFsX3N0YXR1c1wiOiBcIk5PUk1BTFwiIHwgXCJESVNSVVBURURcIiB8IFwiVU5LTk9XTlwiLFxyXG4gIFwic2lnbmFsc1wiOiBbXHJcbiAgICB7XHJcbiAgICAgIFwic3VtbWFyeVwiOiBcIkRldGFpbGVkIGZpbmRpbmcgd2l0aCBudW1iZXJzL3F1b3RlcyBpZiBhdmFpbGFibGVcIixcclxuICAgICAgXCJzZXZlcml0eVwiOiBcIkxPV1wiIHwgXCJNRURJVU1cIiB8IFwiSElHSFwiLFxyXG4gICAgICBcImRhdGVcIjogXCJZWVlZLU1NLUREXCIsXHJcbiAgICAgIFwiY2F0ZWdvcnlcIjogXCJNRVRSSUNcIiB8IFwiUVVPVEVcIiB8IFwiU1RBVFVTXCJcclxuICAgIH1cclxuICBdXHJcbn1cclxuYFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNvdXJjZXM7XHJcbn1cclxuXHJcbi8vIC0tLSBTVEFHRSAyOiBQQVJBTExFTCBBR0VOVCBFWEVDVVRJT04gLS0tXHJcbmZ1bmN0aW9uIGNyZWF0ZVNzZVBhcnNlcihvbkV2ZW50KSB7XHJcbiAgICBsZXQgYnVmZmVyID0gXCJcIjtcclxuICAgIHJldHVybiAoY2h1bmspID0+IHtcclxuICAgICAgICBidWZmZXIgKz0gY2h1bms7XHJcbiAgICAgICAgY29uc3QgcGFydHMgPSBidWZmZXIuc3BsaXQoXCJcXG5cXG5cIik7XHJcbiAgICAgICAgYnVmZmVyID0gcGFydHMucG9wKCkgfHwgXCJcIjtcclxuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgcGFydHMpIHtcclxuICAgICAgICAgICAgY29uc3QgbGluZXMgPSBwYXJ0LnNwbGl0KFwiXFxuXCIpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmICghbGluZS5zdGFydHNXaXRoKFwiZGF0YTogXCIpKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSBsaW5lLnNsaWNlKDYpLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgIGlmICghcGF5bG9hZCkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHBheWxvYWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9uRXZlbnQoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIHBhcnRpYWwgSlNPTiBvciBub24tSlNPTiBoZWFydGJlYXRzLlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gYW5hbHl6ZVNvdXJjZShzb3VyY2UpIHtcclxuICAgIGNvbnN0IGRlZmF1bHRHb2FsID0gYFxyXG4jIyMgTUlTU0lPTjogREVFUCBJTlRFTExJR0VOQ0UgRVhUUkFDVElPTlxyXG5UQVJHRVQgVVJMOiAke3NvdXJjZS51cmx9XHJcblxyXG5Zb3UgYXJlIGEgTG9naXN0aWNzIEludGVsbGlnZW5jZSBTY291dC4gWW91ciBqb2IgaXMgdG8gZXh0cmFjdCBERVRBSUxFRCBvcGVyYXRpb25hbCBpbnRlbGxpZ2VuY2UgZnJvbSB0aGlzIHBhZ2UuXHJcblxyXG4jIyMgSU5TVFJVQ1RJT05TOlxyXG4xLiBTY2FuIGZvciBzcGVjaWZpYyAqKk1FVFJJQ1MqKiAoZS5nLiwgXCJXYWl0IHRpbWU6IDMgZGF5c1wiLCBcIkFuY2hvcmVkIHZlc3NlbHM6IDEyXCIsIFwiR2F0ZSB0dXJuIHRpbWU6IDQ1IG1pblwiLCBcIkFkdmlzb3J5ICMyMDI0LTA1XCIpLlxyXG4yLiBFeHRyYWN0ICoqRElSRUNUIFFVT1RFUyoqIGZyb20gaGVhZGVycyBvciBhbGVydHMgdGhhdCBkZXNjcmliZSB0aGUgc2l0dWF0aW9uLlxyXG4zLiBJZGVudGlmeSAqKkRBVEVTKiogb2Ygc3BlY2lmaWMgdXBjb21pbmcgZGlzcnVwdGlvbnMgKHN0cmlrZXMsIGhvbGlkYXlzLCBtYWludGVuYW5jZSkuXHJcbjQuIElmIG9wZXJhdGlvbnMgYXJlIG5vcm1hbCwgZXh0cmFjdCB0aGUgdGV4dCB0aGF0ICpzYXlzKiB0aGV5IGFyZSBub3JtYWwgKGUuZy4sIFwiQWxsIHRlcm1pbmFscyBvcGVuXCIsIFwiTm8gZGVsYXlzIHJlcG9ydGVkXCIpLlxyXG41LiBETyBOT1QgYmUgdmFndWUuIFwiQ29uZ2VzdGlvblwiIGlzIGJhZC4gXCJDb25nZXN0aW9uOiA1IGRheSBkZWxheVwiIGlzIGdvb2QuXHJcblxyXG4jIyMgUkVRVUlSRUQgT1VUUFVUIChKU09OIE9OTFkpOlxyXG57XHJcbiAgXCJzY2FuX3N0YXR1c1wiOiBcImNvbXBsZXRlZFwiLFxyXG4gIFwib3BlcmF0aW9uYWxfc3RhdHVzXCI6IFwiTk9STUFMXCIgfCBcIkRJU1JVUFRFRFwiIHwgXCJVTktOT1dOXCIsXHJcbiAgXCJzaWduYWxzXCI6IFtcclxuICAgIHtcclxuICAgICAgXCJzdW1tYXJ5XCI6IFwiRGV0YWlsZWQgZmluZGluZyB3aXRoIG51bWJlcnMvcXVvdGVzIGlmIGF2YWlhYmxlXCIsXHJcbiAgICAgIFwic2V2ZXJpdHlcIjogXCJMT1dcIiB8IFwiTUVESVVNXCIgfCBcIkhJR0hcIixcclxuICAgICAgXCJkYXRlXCI6IFwiWVlZWS1NTS1ERFwiLFxyXG4gICAgICBcImNhdGVnb3J5XCI6IFwiTUVUUklDXCIgfCBcIlFVT1RFXCIgfCBcIlNUQVRVU1wiXHJcbiAgICB9XHJcbiAgXVxyXG59XHJcbmA7XHJcblxyXG4gICAgY29uc3Qgc3RhcnRlZEF0ID0gRGF0ZS5ub3coKTtcclxuICAgIGNvbnN0IHRpbWVvdXRBdHRlbXB0cyA9IHNvdXJjZS50eXBlID09PSBcImN1c3RvbV9kaXNjb3ZlcnlcIiA/IFs2MDAwMCwgOTAwMDBdIDogWzQ1MDAwLCA2MDAwMF07XHJcbiAgICBsZXQgbGFzdEVycm9yID0gbnVsbDtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhgW0FnZW50XSBTY291dGluZyAke3NvdXJjZS5uYW1lfS4uLmApO1xyXG5cclxuICAgIGZvciAobGV0IGF0dGVtcHQgPSAwOyBhdHRlbXB0IDwgdGltZW91dEF0dGVtcHRzLmxlbmd0aDsgYXR0ZW1wdCsrKSB7XHJcbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcclxuICAgICAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgdGltZW91dEF0dGVtcHRzW2F0dGVtcHRdKTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgZ29hbCA9IHNvdXJjZS5nb2FsIHx8IGRlZmF1bHRHb2FsO1xyXG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCBydW5HZW5lcmljQWdlbnQoc291cmNlLnVybCwgZ29hbCwgeyBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsIH0pO1xyXG4gICAgICAgICAgICBjb25zdCByZWFkZXIgPSBzdHJlYW0uZ2V0UmVhZGVyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcclxuICAgICAgICAgICAgbGV0IGZpbmFsUmVzdWx0ID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlID0gY3JlYXRlU3NlUGFyc2VyKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5maW5hbF9yZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaW5hbFJlc3VsdCA9IGRhdGEuZmluYWxfcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGRvbmUsIHZhbHVlIH0gPSBhd2FpdCByZWFkZXIucmVhZCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRvbmUpIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2h1bmsgPSBkZWNvZGVyLmRlY29kZSh2YWx1ZSwgeyBzdHJlYW06IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICBwYXJzZShjaHVuayk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzb3VyY2U6IHNvdXJjZS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgZmluZGluZ3M6IGZpbmFsUmVzdWx0LFxyXG4gICAgICAgICAgICAgICAgZHVyYXRpb25fbXM6IERhdGUubm93KCkgLSBzdGFydGVkQXQsXHJcbiAgICAgICAgICAgICAgICBhdHRlbXB0czogYXR0ZW1wdCArIDFcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBsYXN0RXJyb3IgPSBlcnJvcjtcclxuICAgICAgICAgICAgaWYgKGVycm9yLm5hbWUgIT09IFwiQWJvcnRFcnJvclwiKSBicmVhaztcclxuICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5lcnJvcihgW0FnZW50XSBGYWlsZWQgdG8gYW5hbHl6ZSAke3NvdXJjZS5uYW1lfTpgLCBsYXN0RXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBzb3VyY2U6IHNvdXJjZS5uYW1lLFxyXG4gICAgICAgIGVycm9yOiBsYXN0RXJyb3I/Lm5hbWUgPT09IFwiQWJvcnRFcnJvclwiID8gXCJBbmFseXNpcyB0aW1lZCBvdXRcIiA6IGxhc3RFcnJvcj8ubWVzc2FnZSxcclxuICAgICAgICBkdXJhdGlvbl9tczogRGF0ZS5ub3coKSAtIHN0YXJ0ZWRBdCxcclxuICAgICAgICBhdHRlbXB0czogdGltZW91dEF0dGVtcHRzLmxlbmd0aCxcclxuICAgICAgICBlcnJvcl9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4vLyAtLS0gU1RBR0UgMzogU1lOVEhFU0lTICYgUkVBU09OSU5HIC0tLVxyXG5mdW5jdGlvbiBzeW50aGVzaXplUmlzayhjb250ZXh0LCBmaW5kaW5ncykge1xyXG4gICAgbGV0IHJpc2tTY29yZSA9IDA7XHJcbiAgICBsZXQgc2lnbmFscyA9IFtdO1xyXG4gICAgbGV0IHByaW1hcnlDYXVzZXMgPSBuZXcgU2V0KCk7XHJcbiAgICBsZXQgc2V2ZXJpdHlDb3VudHMgPSB7IEhJR0g6IDAsIE1FRElVTTogMCwgTE9XOiAwIH07XHJcbiAgICBsZXQgY2F0ZWdvcnlDb3VudHMgPSB7IE1FVFJJQzogMCwgUVVPVEU6IDAsIFNUQVRVUzogMCB9O1xyXG4gICAgbGV0IHJlY2VuY3lCdWNrZXRzID0geyByZWNlbnQ6IDAsIHN0YWxlOiAwLCB1bmtub3duOiAwIH07XHJcbiAgICBsZXQgc2lnbmFsRGF0ZXMgPSBbXTtcclxuXHJcbiAgICBmaW5kaW5ncy5mb3JFYWNoKGYgPT4ge1xyXG4gICAgICAgIGlmIChmLmZpbmRpbmdzICYmIGYuZmluZGluZ3Muc2lnbmFscykge1xyXG4gICAgICAgICAgICBmLmZpbmRpbmdzLnNpZ25hbHMuZm9yRWFjaChzID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIEZvcm1hdHRpbmcgdGhlIHNpZ25hbCB0ZXh0IHRvIGJlIG1vcmUgcmVhZGFibGUgaWYgaXQncyBhIG1ldHJpY1xyXG4gICAgICAgICAgICAgICAgbGV0IGZvcm1hdHRlZFNpZ25hbCA9IHMuc3VtbWFyeTtcclxuICAgICAgICAgICAgICAgIGlmIChzLmNhdGVnb3J5ID09PSBcIk1FVFJJQ1wiKSBmb3JtYXR0ZWRTaWduYWwgPSBgW01FVFJJQ10gJHtzLnN1bW1hcnl9YDtcclxuICAgICAgICAgICAgICAgIGlmIChzLmNhdGVnb3J5ID09PSBcIlFVT1RFXCIpIGZvcm1hdHRlZFNpZ25hbCA9IGBcIiR7cy5zdW1tYXJ5fVwiYDtcclxuXHJcbiAgICAgICAgICAgICAgICBzaWduYWxzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogZi5zb3VyY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgc2lnbmFsOiBmb3JtYXR0ZWRTaWduYWwsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogcy5kYXRlIHx8IFwiSnVzdCBub3dcIixcclxuICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogcy5zZXZlcml0eVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHMuc2V2ZXJpdHkgPT09IFwiSElHSFwiKSByaXNrU2NvcmUgKz0gNTA7XHJcbiAgICAgICAgICAgICAgICBpZiAocy5zZXZlcml0eSA9PT0gXCJNRURJVU1cIikgcmlza1Njb3JlICs9IDIwO1xyXG4gICAgICAgICAgICAgICAgaWYgKHMuc2V2ZXJpdHkgPT09IFwiTE9XXCIpIHJpc2tTY29yZSArPSAwOyAvLyBMb3cgZG9lc24ndCBpbmNyZWFzZSByaXNrLCBidXQgcHJvdmlkZXMgY29udGV4dFxyXG4gICAgICAgICAgICAgICAgaWYgKHNldmVyaXR5Q291bnRzW3Muc2V2ZXJpdHldICE9PSB1bmRlZmluZWQpIHNldmVyaXR5Q291bnRzW3Muc2V2ZXJpdHldICs9IDE7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2F0ZWdvcnlDb3VudHNbcy5jYXRlZ29yeV0gIT09IHVuZGVmaW5lZCkgY2F0ZWdvcnlDb3VudHNbcy5jYXRlZ29yeV0gKz0gMTtcclxuICAgICAgICAgICAgICAgIGlmIChzLmRhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBzaWduYWxEYXRlcy5wdXNoKHMuZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gRGF0ZS5wYXJzZShzLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUocGFyc2VkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhZ2VEYXlzID0gKERhdGUubm93KCkgLSBwYXJzZWQpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWdlRGF5cyA8PSAxNCkgcmVjZW5jeUJ1Y2tldHMucmVjZW50ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgcmVjZW5jeUJ1Y2tldHMuc3RhbGUgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlbmN5QnVja2V0cy51bmtub3duICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZWNlbmN5QnVja2V0cy51bmtub3duICs9IDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHMuc2V2ZXJpdHkgIT09IFwiTE9XXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUcnkgdG8gaW5mZXIgY2F1c2UgZnJvbSBzdW1tYXJ5IGtleXdvcmRzXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IHMuc3VtbWFyeS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0LmluY2x1ZGVzKFwiY29uZ2VzdGlvblwiKSB8fCB0ZXh0LmluY2x1ZGVzKFwiYW5jaG9yXCIpIHx8IHRleHQuaW5jbHVkZXMoXCJkd2VlbFwiKSkgcHJpbWFyeUNhdXNlcy5hZGQoXCJDT05HRVNUSU9OXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0LmluY2x1ZGVzKFwic3RyaWtlXCIpIHx8IHRleHQuaW5jbHVkZXMoXCJsYWJvclwiKSB8fCB0ZXh0LmluY2x1ZGVzKFwidW5pb25cIikpIHByaW1hcnlDYXVzZXMuYWRkKFwiTEFCT1JcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRleHQuaW5jbHVkZXMoXCJ3ZWF0aGVyXCIpIHx8IHRleHQuaW5jbHVkZXMoXCJzdG9ybVwiKSB8fCB0ZXh0LmluY2x1ZGVzKFwiZm9nXCIpIHx8IHRleHQuaW5jbHVkZXMoXCJ3aW5kXCIpKSBwcmltYXJ5Q2F1c2VzLmFkZChcIldFQVRIRVJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRleHQuaW5jbHVkZXMoXCJtYWludGVuYW5jZVwiKSB8fCB0ZXh0LmluY2x1ZGVzKFwib3V0YWdlXCIpKSBwcmltYXJ5Q2F1c2VzLmFkZChcIlRFQ0hOSUNBTFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChmLmVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yRGF0ZSA9IGYuZXJyb3JfYXQgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgICAgICAgICBzaWduYWxzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgc291cmNlOiBmLnNvdXJjZSxcclxuICAgICAgICAgICAgICAgIHNpZ25hbDogXCJDb25uZWN0aW9uIHRpbWVkIG91dCBkdXJpbmcgZGVlcCBzY2FuLlwiLFxyXG4gICAgICAgICAgICAgICAgZGF0ZTogZXJyb3JEYXRlLFxyXG4gICAgICAgICAgICAgICAgc2V2ZXJpdHk6IFwiTE9XXCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHNldmVyaXR5Q291bnRzLkxPVyArPSAxO1xyXG4gICAgICAgICAgICBjYXRlZ29yeUNvdW50cy5TVEFUVVMgKz0gMTtcclxuICAgICAgICAgICAgc2lnbmFsRGF0ZXMucHVzaChlcnJvckRhdGUpO1xyXG4gICAgICAgICAgICByZWNlbmN5QnVja2V0cy51bmtub3duICs9IDE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gRmFsbGJhY2sgZm9yIGVtcHR5IGZpbmRpbmdzIChsaWtlbHkgbm9ybWFsKVxyXG4gICAgICAgICAgICBjb25zdCBmYWxsYmFja0RhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIHNpZ25hbHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBzb3VyY2U6IGYuc291cmNlLFxyXG4gICAgICAgICAgICAgICAgc2lnbmFsOiBcIlZlcmlmaWVkOiBObyBuZWdhdGl2ZSBvcGVyYXRpb25hbCBjb25zdHJhaW50cyBmb3VuZC5cIixcclxuICAgICAgICAgICAgICAgIGRhdGU6IGZhbGxiYWNrRGF0ZSxcclxuICAgICAgICAgICAgICAgIHNldmVyaXR5OiBcIkxPV1wiXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzZXZlcml0eUNvdW50cy5MT1cgKz0gMTtcclxuICAgICAgICAgICAgY2F0ZWdvcnlDb3VudHMuU1RBVFVTICs9IDE7XHJcbiAgICAgICAgICAgIHNpZ25hbERhdGVzLnB1c2goZmFsbGJhY2tEYXRlKTtcclxuICAgICAgICAgICAgcmVjZW5jeUJ1Y2tldHMudW5rbm93biArPSAxO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGxldCByaXNrTGV2ZWwgPSBcIkxPV1wiO1xyXG4gICAgaWYgKHJpc2tTY29yZSA+PSA1MCkgcmlza0xldmVsID0gXCJISUdIXCI7XHJcbiAgICBlbHNlIGlmIChyaXNrU2NvcmUgPj0gMjApIHJpc2tMZXZlbCA9IFwiTUVESVVNXCI7XHJcblxyXG4gICAgbGV0IGNvbmZpZGVuY2UgPSAwLjg1O1xyXG4gICAgY29uc3QgY2F1c2VzID0gQXJyYXkuZnJvbShwcmltYXJ5Q2F1c2VzKS5qb2luKFwiICsgXCIpO1xyXG4gICAgY29uc3Qgbm9ybWFsaXplZFJpc2tTY29yZSA9IE1hdGgubWluKDEwMCwgTWF0aC5tYXgoMCwgcmlza1Njb3JlKSk7XHJcbiAgICBjb25zdCBzb3VyY2VUaW1pbmdzID0gZmluZGluZ3NcclxuICAgICAgICAuZmlsdGVyKGYgPT4gdHlwZW9mIGYuZHVyYXRpb25fbXMgPT09IFwibnVtYmVyXCIpXHJcbiAgICAgICAgLm1hcChmID0+ICh7IHNvdXJjZTogZi5zb3VyY2UsIGR1cmF0aW9uX21zOiBmLmR1cmF0aW9uX21zIH0pKTtcclxuICAgIGNvbnN0IHRvdGFsU2lnbmFscyA9IHNpZ25hbHMubGVuZ3RoO1xyXG4gICAgY29uc3Qgc2lnbmFsRGVuc2l0eSA9IHRvdGFsU2lnbmFscyA+IDAgPyB0b3RhbFNpZ25hbHMgLyBNYXRoLm1heCgxLCBmaW5kaW5ncy5sZW5ndGgpIDogMDtcclxuICAgIGNvbnN0IGxhdGVzdFNpZ25hbERhdGUgPSBzaWduYWxEYXRlcy5sZW5ndGggPiAwID8gc2lnbmFsRGF0ZXMuc29ydCgpLnNsaWNlKC0xKVswXSA6IG51bGw7XHJcblxyXG4gICAgLy8gR2VuZXJhdGUgc3BlY2lmaWMgcmVjb21tZW5kYXRpb25cclxuICAgIGxldCBhY3Rpb24gPSBcIk5ldHdvcmsgb3BlcmF0aW5nIG5vcm1hbGx5LiBDb250aW51ZSBzdGFuZGFyZCBtb25pdG9yaW5nLlwiO1xyXG4gICAgaWYgKHJpc2tMZXZlbCA9PT0gXCJISUdIXCIpIHtcclxuICAgICAgICBpZiAoY2F1c2VzLmluY2x1ZGVzKFwiTEFCT1JcIikpIGFjdGlvbiA9IFwiQ1JJVElDQUw6IERpdmVydCBjYXJnbyBpbW1lZGlhdGVseS4gTGFib3IgYWN0aW9uIGNvbmZpcm1lZC5cIjtcclxuICAgICAgICBlbHNlIGlmIChjYXVzZXMuaW5jbHVkZXMoXCJXRUFUSEVSXCIpKSBhY3Rpb24gPSBcIlNjaGVkdWxlIHNsaWRlIGluZXZpdGFibGUuIE5vdGlmeSBjdXN0b21lcnMgb2YgZGVsYXkuXCI7XHJcbiAgICAgICAgZWxzZSBhY3Rpb24gPSBcIkhpZ2ggcmlzayBkZXRlY3RlZC4gQ29udGFjdCBjYXJyaWVyIHJlcHJlc2VudGF0aXZlLlwiO1xyXG4gICAgfSBlbHNlIGlmIChyaXNrTGV2ZWwgPT09IFwiTUVESVVNXCIpIHtcclxuICAgICAgICBpZiAoY2F1c2VzLmluY2x1ZGVzKFwiQ09OR0VTVElPTlwiKSkgYWN0aW9uID0gXCJBbnRpY2lwYXRlIDItNCBkYXkgYmVydGhpbmcgZGVsYXkuIE1vbml0b3IgdmVzc2VsIHBvc2l0aW9uLlwiO1xyXG4gICAgICAgIGVsc2UgYWN0aW9uID0gXCJNb25pdG9yIGNsb3NlbHkuIE1pbm9yIGRpc3J1cHRpb25zIHJlcG9ydGVkLlwiO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHNldmVyaXR5VG90YWwgPSBzZXZlcml0eUNvdW50cy5ISUdIICsgc2V2ZXJpdHlDb3VudHMuTUVESVVNICsgc2V2ZXJpdHlDb3VudHMuTE9XO1xyXG4gICAgY29uc3Qgc2V2ZXJpdHlXZWlnaHQgPSBzZXZlcml0eVRvdGFsID4gMFxyXG4gICAgICAgID8gKHNldmVyaXR5Q291bnRzLkhJR0ggKiAxICsgc2V2ZXJpdHlDb3VudHMuTUVESVVNICogMC42ICsgc2V2ZXJpdHlDb3VudHMuTE9XICogMC4yKSAvIHNldmVyaXR5VG90YWxcclxuICAgICAgICA6IDAuMjtcclxuICAgIGNvbnN0IHJlY2VuY3lUb3RhbCA9IHJlY2VuY3lCdWNrZXRzLnJlY2VudCArIHJlY2VuY3lCdWNrZXRzLnN0YWxlICsgcmVjZW5jeUJ1Y2tldHMudW5rbm93bjtcclxuICAgIGNvbnN0IHJlY2VuY3lXZWlnaHQgPSByZWNlbmN5VG90YWwgPiAwXHJcbiAgICAgICAgPyAocmVjZW5jeUJ1Y2tldHMucmVjZW50ICogMSArIHJlY2VuY3lCdWNrZXRzLnN0YWxlICogMC40ICsgcmVjZW5jeUJ1Y2tldHMudW5rbm93biAqIDAuNikgLyByZWNlbmN5VG90YWxcclxuICAgICAgICA6IDAuNjtcclxuICAgIGNvbnN0IHN1Y2Nlc3NmdWxTb3VyY2VzID0gZmluZGluZ3MuZmlsdGVyKGYgPT4gZi5maW5kaW5ncyAmJiBmLmZpbmRpbmdzLnNpZ25hbHMpLmxlbmd0aDtcclxuICAgIGNvbnN0IGNvdmVyYWdlV2VpZ2h0ID0gZmluZGluZ3MubGVuZ3RoID4gMFxyXG4gICAgICAgID8gTWF0aC5taW4oMSwgc3VjY2Vzc2Z1bFNvdXJjZXMgLyBmaW5kaW5ncy5sZW5ndGgpXHJcbiAgICAgICAgOiAwLjQ7XHJcblxyXG4gICAgY29uc3QgY29uZmlkZW5jZVdlaWdodGVkID0gTWF0aC5taW4oXHJcbiAgICAgICAgMC45OSxcclxuICAgICAgICBNYXRoLm1heCgwLjIsIChzZXZlcml0eVdlaWdodCAqIDAuNCkgKyAocmVjZW5jeVdlaWdodCAqIDAuMzUpICsgKGNvdmVyYWdlV2VpZ2h0ICogMC4yNSkpXHJcbiAgICApO1xyXG5cclxuICAgIGNvbmZpZGVuY2UgPSBNYXRoLm1pbihjb25maWRlbmNlLCBjb25maWRlbmNlV2VpZ2h0ZWQpO1xyXG5cclxuICAgIGNvbnN0IHN1bW1hcnkgPSBbXHJcbiAgICAgICAgYFJpc2sgJHtyaXNrTGV2ZWx9YCxcclxuICAgICAgICBjYXVzZXMgPyBgQ2F1c2VzOiAke2NhdXNlc31gIDogXCJDYXVzZXM6IE5vcm1hbCBPcGVyYXRpb25zXCIsXHJcbiAgICAgICAgYFNpZ25hbHM6ICR7c2lnbmFscy5sZW5ndGh9YCxcclxuICAgICAgICBgUmVjZW50OiAke3JlY2VuY3lCdWNrZXRzLnJlY2VudH0sIFN0YWxlOiAke3JlY2VuY3lCdWNrZXRzLnN0YWxlfWBcclxuICAgIF0uam9pbihcIiDigKIgXCIpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgc2hpcG1lbnRfY29udGV4dDogY29udGV4dCxcclxuICAgICAgICByaXNrX2Fzc2Vzc21lbnQ6IHtcclxuICAgICAgICAgICAgZGVsYXlfcmlzazogcmlza0xldmVsLFxyXG4gICAgICAgICAgICBwcmltYXJ5X2NhdXNlOiBjYXVzZXMgfHwgXCJOb3JtYWwgT3BlcmF0aW9uc1wiLFxyXG4gICAgICAgICAgICBjb25maWRlbmNlOiBNYXRoLm1pbigwLjk5LCBjb25maWRlbmNlKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYW5hbHlzaXM6IHtcclxuICAgICAgICAgICAgcmlza19zY29yZTogbm9ybWFsaXplZFJpc2tTY29yZSxcclxuICAgICAgICAgICAgZXZpZGVuY2VfY291bnRzOiB7XHJcbiAgICAgICAgICAgICAgICBzZXZlcml0eTogc2V2ZXJpdHlDb3VudHMsXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeTogY2F0ZWdvcnlDb3VudHNcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc291cmNlX3RpbWluZ3M6IHNvdXJjZVRpbWluZ3MsXHJcbiAgICAgICAgICAgIHNpZ25hbF9kZW5zaXR5OiBOdW1iZXIoc2lnbmFsRGVuc2l0eS50b0ZpeGVkKDIpKSxcclxuICAgICAgICAgICAgcmVjZW5jeToge1xyXG4gICAgICAgICAgICAgICAgYnVja2V0czogcmVjZW5jeUJ1Y2tldHMsXHJcbiAgICAgICAgICAgICAgICBsYXRlc3Rfc2lnbmFsX2RhdGU6IGxhdGVzdFNpZ25hbERhdGVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY29uZmlkZW5jZV9icmVha2Rvd246IHtcclxuICAgICAgICAgICAgICAgIHdlaWdodGVkX2NvbmZpZGVuY2U6IE51bWJlcihjb25maWRlbmNlV2VpZ2h0ZWQudG9GaXhlZCgyKSksXHJcbiAgICAgICAgICAgICAgICBzZXZlcml0eV93ZWlnaHQ6IE51bWJlcihzZXZlcml0eVdlaWdodC50b0ZpeGVkKDIpKSxcclxuICAgICAgICAgICAgICAgIHJlY2VuY3lfd2VpZ2h0OiBOdW1iZXIocmVjZW5jeVdlaWdodC50b0ZpeGVkKDIpKSxcclxuICAgICAgICAgICAgICAgIGNvdmVyYWdlX3dlaWdodDogTnVtYmVyKGNvdmVyYWdlV2VpZ2h0LnRvRml4ZWQoMikpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN1bW1hcnlcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNpZ25hbHNfZGV0ZWN0ZWQ6IHNpZ25hbHMsXHJcbiAgICAgICAgcmVjb21tZW5kZWRfYWN0aW9uOiBhY3Rpb25cclxuICAgIH07XHJcbn1cclxuXHJcblxyXG4vLyAtLS0gTUFJTiBFTlRSWSBQT0lOVCAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFzc2Vzc0RlbGF5Umlzayhjb250ZXh0KSB7XHJcbiAgICBjb25zdCBzdGFydGVkQXQgPSBEYXRlLm5vdygpO1xyXG4gICAgY29uc3QgeyBvcmlnaW5fcG9ydCwgY2FycmllciwgbW9kZSB9ID0gY29udGV4dDtcclxuXHJcbiAgICAvLyAxLiBEaXNjb3ZlclxyXG4gICAgbGV0IHNvdXJjZXMgPSBbXHJcbiAgICAgICAgLi4uKFNPVVJDRV9LTk9XTEVER0VfQkFTRS5wb3J0c1tvcmlnaW5fcG9ydF0gfHwgW10pLFxyXG4gICAgICAgIC4uLihTT1VSQ0VfS05PV0xFREdFX0JBU0UuY2FycmllcnNbY2Fycmllcl0gfHwgW10pXHJcbiAgICBdO1xyXG5cclxuICAgIGxldCBkaXNjb3ZlcnlVc2VkID0gZmFsc2U7XHJcbiAgICBpZiAoc291cmNlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBzb3VyY2VzID0gYnVpbGREaXNjb3ZlcnlTb3VyY2VzKG9yaWdpbl9wb3J0LCBjYXJyaWVyKTtcclxuICAgICAgICBkaXNjb3ZlcnlVc2VkID0gc291cmNlcy5sZW5ndGggPiAwO1xyXG4gICAgICAgIGlmICghZGlzY292ZXJ5VXNlZCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZXJyb3I6IFwiTm8gaW50ZWxsaWdlbnQgc291cmNlcyBmb3VuZCBmb3IgdGhpcyBjb250ZXh0LlwiLFxyXG4gICAgICAgICAgICAgICAgc3VwcG9ydGVkX29yaWdpbnM6IE9iamVjdC5rZXlzKFNPVVJDRV9LTk9XTEVER0VfQkFTRS5wb3J0cyksXHJcbiAgICAgICAgICAgICAgICBzdXBwb3J0ZWRfY2FycmllcnM6IE9iamVjdC5rZXlzKFNPVVJDRV9LTk9XTEVER0VfQkFTRS5jYXJyaWVycylcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gMi4gUGFyYWxsZWwgQWN0aW9uc1xyXG4gICAgY29uc29sZS5sb2coYFtPcmNoZXN0cmF0b3JdIExhdW5jaGluZyAke3NvdXJjZXMubGVuZ3RofSBhZ2VudHMgZm9yICR7b3JpZ2luX3BvcnR9IC8gJHtjYXJyaWVyfS4uLmApO1xyXG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKHNvdXJjZXMubWFwKHMgPT4gYW5hbHl6ZVNvdXJjZShzKSkpO1xyXG5cclxuICAgIC8vIDMuIFN5bnRoZXNpc1xyXG4gICAgY29uc3Qgc3ludGhlc2l6ZWQgPSBzeW50aGVzaXplUmlzayh7IC4uLmNvbnRleHQsIGRpc2NvdmVyeV91c2VkOiBkaXNjb3ZlcnlVc2VkIH0sIHJlc3VsdHMpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICAuLi5zeW50aGVzaXplZCxcclxuICAgICAgICBhbmFseXNpczoge1xyXG4gICAgICAgICAgICAuLi5zeW50aGVzaXplZC5hbmFseXNpcyxcclxuICAgICAgICAgICAgdG90YWxfZHVyYXRpb25fbXM6IERhdGUubm93KCkgLSBzdGFydGVkQXRcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJydW5HZW5lcmljQWdlbnQiLCJTT1VSQ0VfS05PV0xFREdFX0JBU0UiLCJwb3J0cyIsIm5hbWUiLCJ1cmwiLCJ0eXBlIiwiY2FycmllcnMiLCJidWlsZERpc2NvdmVyeVNvdXJjZXMiLCJvcmlnaW5fcG9ydCIsImNhcnJpZXIiLCJzb3VyY2VzIiwicG9ydFF1ZXJ5IiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicHVzaCIsImdvYWwiLCJjYXJyaWVyUXVlcnkiLCJjcmVhdGVTc2VQYXJzZXIiLCJvbkV2ZW50IiwiYnVmZmVyIiwiY2h1bmsiLCJwYXJ0cyIsInNwbGl0IiwicG9wIiwicGFydCIsImxpbmVzIiwibGluZSIsInN0YXJ0c1dpdGgiLCJwYXlsb2FkIiwic2xpY2UiLCJ0cmltIiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsImUiLCJhbmFseXplU291cmNlIiwic291cmNlIiwiZGVmYXVsdEdvYWwiLCJzdGFydGVkQXQiLCJEYXRlIiwibm93IiwidGltZW91dEF0dGVtcHRzIiwibGFzdEVycm9yIiwiY29uc29sZSIsImxvZyIsImF0dGVtcHQiLCJsZW5ndGgiLCJjb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwidGltZW91dElkIiwic2V0VGltZW91dCIsImFib3J0Iiwic3RyZWFtIiwic2lnbmFsIiwicmVhZGVyIiwiZ2V0UmVhZGVyIiwiZGVjb2RlciIsIlRleHREZWNvZGVyIiwiZmluYWxSZXN1bHQiLCJmaW5hbF9yZXN1bHQiLCJkb25lIiwidmFsdWUiLCJyZWFkIiwiZGVjb2RlIiwiZmluZGluZ3MiLCJkdXJhdGlvbl9tcyIsImF0dGVtcHRzIiwiZXJyb3IiLCJjbGVhclRpbWVvdXQiLCJtZXNzYWdlIiwiZXJyb3JfYXQiLCJ0b0lTT1N0cmluZyIsInN5bnRoZXNpemVSaXNrIiwiY29udGV4dCIsInJpc2tTY29yZSIsInNpZ25hbHMiLCJwcmltYXJ5Q2F1c2VzIiwiU2V0Iiwic2V2ZXJpdHlDb3VudHMiLCJISUdIIiwiTUVESVVNIiwiTE9XIiwiY2F0ZWdvcnlDb3VudHMiLCJNRVRSSUMiLCJRVU9URSIsIlNUQVRVUyIsInJlY2VuY3lCdWNrZXRzIiwicmVjZW50Iiwic3RhbGUiLCJ1bmtub3duIiwic2lnbmFsRGF0ZXMiLCJmb3JFYWNoIiwiZiIsInMiLCJmb3JtYXR0ZWRTaWduYWwiLCJzdW1tYXJ5IiwiY2F0ZWdvcnkiLCJkYXRlIiwic2V2ZXJpdHkiLCJ1bmRlZmluZWQiLCJwYXJzZWQiLCJOdW1iZXIiLCJpc0Zpbml0ZSIsImFnZURheXMiLCJ0ZXh0IiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsImFkZCIsImVycm9yRGF0ZSIsImZhbGxiYWNrRGF0ZSIsInJpc2tMZXZlbCIsImNvbmZpZGVuY2UiLCJjYXVzZXMiLCJBcnJheSIsImZyb20iLCJqb2luIiwibm9ybWFsaXplZFJpc2tTY29yZSIsIk1hdGgiLCJtaW4iLCJtYXgiLCJzb3VyY2VUaW1pbmdzIiwiZmlsdGVyIiwibWFwIiwidG90YWxTaWduYWxzIiwic2lnbmFsRGVuc2l0eSIsImxhdGVzdFNpZ25hbERhdGUiLCJzb3J0IiwiYWN0aW9uIiwic2V2ZXJpdHlUb3RhbCIsInNldmVyaXR5V2VpZ2h0IiwicmVjZW5jeVRvdGFsIiwicmVjZW5jeVdlaWdodCIsInN1Y2Nlc3NmdWxTb3VyY2VzIiwiY292ZXJhZ2VXZWlnaHQiLCJjb25maWRlbmNlV2VpZ2h0ZWQiLCJzaGlwbWVudF9jb250ZXh0Iiwicmlza19hc3Nlc3NtZW50IiwiZGVsYXlfcmlzayIsInByaW1hcnlfY2F1c2UiLCJhbmFseXNpcyIsInJpc2tfc2NvcmUiLCJldmlkZW5jZV9jb3VudHMiLCJzb3VyY2VfdGltaW5ncyIsInNpZ25hbF9kZW5zaXR5IiwidG9GaXhlZCIsInJlY2VuY3kiLCJidWNrZXRzIiwibGF0ZXN0X3NpZ25hbF9kYXRlIiwiY29uZmlkZW5jZV9icmVha2Rvd24iLCJ3ZWlnaHRlZF9jb25maWRlbmNlIiwic2V2ZXJpdHlfd2VpZ2h0IiwicmVjZW5jeV93ZWlnaHQiLCJjb3ZlcmFnZV93ZWlnaHQiLCJzaWduYWxzX2RldGVjdGVkIiwicmVjb21tZW5kZWRfYWN0aW9uIiwiYXNzZXNzRGVsYXlSaXNrIiwibW9kZSIsImRpc2NvdmVyeVVzZWQiLCJzdXBwb3J0ZWRfb3JpZ2lucyIsIk9iamVjdCIsImtleXMiLCJzdXBwb3J0ZWRfY2FycmllcnMiLCJyZXN1bHRzIiwiUHJvbWlzZSIsImFsbCIsInN5bnRoZXNpemVkIiwiZGlzY292ZXJ5X3VzZWQiLCJ0b3RhbF9kdXJhdGlvbl9tcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/logistics/agent.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/mino.js":
/*!*************************!*\
  !*** ./src/lib/mino.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   runAgent: () => (/* binding */ runAgent),\n/* harmony export */   runGenericAgent: () => (/* binding */ runGenericAgent)\n/* harmony export */ });\n/* harmony import */ var private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! private-next-rsc-server-reference */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/server-reference.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! private-next-rsc-action-encryption */ \"(rsc)/./node_modules/next/dist/server/app-render/encryption.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! private-next-rsc-action-validate */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js\");\n/* __next_internal_action_entry_do_not_use__ {\"bfa6338ebf3178b91e51cea25981e0cd489aff33\":\"runGenericAgent\",\"e171e01fa27059db01fd1b54a0ececfc54a79f17\":\"runAgent\"} */ \n\nconst MINO_API_URL = \"https://mino.ai/v1/automation/run-sse\";\nconst MINO_API_KEY = process.env.MINO_API_KEY;\nasync function runAgent(sku, intendedUpdate, contextUrl, options = {}) {\n    const targetUrl = contextUrl || \"https://inventory-demo-dashboard.com\";\n    const missionType = intendedUpdate ? `cross-verify the safety of an intended stock update (\"${intendedUpdate}\")` : `perform a general integrity audit to ensure data consistency across sources`;\n    const goal = `\r\n### MISSION: DEEP INTEGRITY AUDIT (SKU: ${sku})\r\n\r\nYou are a senior Autonomous Inventory Auditor. Your mission is to ${missionType} by investigating multiple data sources.\r\n${contextUrl ? `\\n**CRITICAL CONTEXT**: The user has provided a specific Source of Truth URL: ${contextUrl}. You MUST navigate to this URL to verify the \"Actual Stock\" against the dashboard's \"Reported Stock\".\\n` : \"\"}\r\n\r\n### AUDIT PHASES\r\n1. **PHASE_1: SURFACE_SCAN (Dashboard)**\r\n   - Navigate to the inventory dashboard at ${targetUrl}.\r\n   - Locate SKU: ${sku} and extract \"Reported Stock\".\r\n   - Report: {\"phase\": \"SURFACE_SCAN\", \"status\": \"completed\", \"findings\": \"Extracted reported stock\"}\r\n\r\n2. **PHASE_2: SOURCE_VERIFICATION (Audit Logs / External Source)**\r\n   ${contextUrl ? `- **Navigate to the provided Source URL**: ${contextUrl}\\n   - Search for ${sku} in the external sheet/feed.\\n   - Compare the \"Stock\" value there with the Dashboard value.` : `- Find and navigate to the \"Audit Logs\" or \"History\" section.\\n   - Search for ${sku} and check the last 5 manual entries.\\n   - Identify if the \"User ID\" or \"Source\" of recent changes looks suspicious or anomalous.`}\r\n   - Report: {\"phase\": \"SOURCE_VERIFICATION\", \"status\": \"completed\", \"findings\": \"Verified log/source integrity\"}\r\n\r\n3. **PHASE_3: BUSINESS_CONTEXT (Sales Analytics)**\r\n   - Navigate to \"Sales Analytics\" or \"Orders\" view.\r\n   ${intendedUpdate ? `- Determine if the \"Sales Velocity\" for ${sku} justifies the intended update: \"${intendedUpdate}\".\\n   - Check for pending shipments that might conflict with this update.` : `- Analyze \"Sales Velocity\" for ${sku} to detect any anomalies vs reported stock.\\n   - Identify if current stock levels are dangerously low or high based on sales trends.`}\r\n   - Report: {\"phase\": \"BUSINESS_CONTEXT\", \"status\": \"completed\", \"findings\": \"Analyzed sales alignment\"}\r\n\r\n4. **PHASE_4: SYNTHESIS & VERDICT**\r\n   - Combine all findings.\r\n   - If there is ANY mismatch between reported stock, audit logs (or external source), and sales trends, you MUST recommend PAUSE or ESCALATE.\r\n\r\n### CONSTRAINTS\r\n- DO NOT act on the update. Your role is AUDIT ONLY.\r\n- Use 'hover' and 'scroll' to ensure you don't miss dense table data.\r\n- Prioritize correctness-first reasoning.\r\n\r\n### REQUIRED FINAL OUTPUT (JSON)\r\n{\r\n  \"current_stock\": number,\r\n  \"recent_changes\": string,\r\n  \"sales_velocity\": \"STABLE\" | \"HIGH\" | \"LOW\",\r\n  \"audit_trail_valid\": boolean,\r\n  \"risk_flags\": string[],\r\n  \"confidence_score\": number,\r\n  \"recommended_action\": \"PROCEED\" | \"PAUSE\" | \"ESCALATE\",\r\n  \"reasoning\": string\r\n}\r\n`;\n    try {\n        const response = await fetch(MINO_API_URL, {\n            method: \"POST\",\n            headers: {\n                \"X-API-Key\": MINO_API_KEY,\n                \"Content-Type\": \"application/json\"\n            },\n            signal: options.signal,\n            body: JSON.stringify({\n                url: targetUrl,\n                goal: goal,\n                browser_profile: \"stealth\"\n            })\n        });\n        if (!response.ok) {\n            throw new Error(`Mino API error: ${response.statusText}`);\n        }\n        // Since this is SSE, we return the stream or a reader\n        return response.body;\n    } catch (error) {\n        console.error(\"Agent execution failed:\", error);\n        throw error;\n    }\n}\nasync function runGenericAgent(url, goal, options = {}) {\n    try {\n        const response = await fetch(MINO_API_URL, {\n            method: \"POST\",\n            headers: {\n                \"X-API-Key\": MINO_API_KEY,\n                \"Content-Type\": \"application/json\"\n            },\n            signal: options.signal,\n            body: JSON.stringify({\n                url: url,\n                goal: goal,\n                browser_profile: \"stealth\"\n            })\n        });\n        if (!response.ok) {\n            throw new Error(`Mino API error: ${response.statusText}`);\n        }\n        return response.body;\n    } catch (error) {\n        console.error(\"Agent execution failed:\", error);\n        throw error;\n    }\n}\n\n(0,private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_2__.ensureServerEntryExports)([\n    runAgent,\n    runGenericAgent\n]);\n(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__.registerServerReference)(\"e171e01fa27059db01fd1b54a0ececfc54a79f17\", runAgent);\n(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__.registerServerReference)(\"bfa6338ebf3178b91e51cea25981e0cd489aff33\", runGenericAgent);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL21pbm8uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFFQSxNQUFNQSxlQUFlO0FBQ3JCLE1BQU1DLGVBQWVDLFFBQVFDLEdBQUcsQ0FBQ0YsWUFBWTtBQUV0QyxlQUFlRyxTQUFTQyxHQUFHLEVBQUVDLGNBQWMsRUFBRUMsVUFBVSxFQUFFQyxVQUFVLENBQUMsQ0FBQztJQUN4RSxNQUFNQyxZQUFZRixjQUFjO0lBQ2hDLE1BQU1HLGNBQWNKLGlCQUFpQixDQUFDLHNEQUFzRCxFQUFFQSxlQUFlLEVBQUUsQ0FBQyxHQUFHLENBQUMsMkVBQTJFLENBQUM7SUFFaE0sTUFBTUssT0FBTyxDQUFDO3dDQUNzQixFQUFFTixJQUFJOztrRUFFb0IsRUFBRUssWUFBWTtBQUNoRixFQUFFSCxhQUFhLENBQUMsOEVBQThFLEVBQUVBLFdBQVcsd0dBQXdHLENBQUMsR0FBRyxHQUFHOzs7OzRDQUk5SyxFQUFFRSxVQUFVO2lCQUN2QyxFQUFFSixJQUFJOzs7O0dBSXBCLEVBQUVFLGFBQWEsQ0FBQywyQ0FBMkMsRUFBRUEsV0FBVyxrQkFBa0IsRUFBRUYsSUFBSSw0RkFBNEYsQ0FBQyxHQUFHLENBQUMsK0VBQStFLEVBQUVBLElBQUksa0lBQWtJLENBQUMsQ0FBQzs7Ozs7R0FLMVosRUFBRUMsaUJBQWlCLENBQUMsd0NBQXdDLEVBQUVELElBQUksaUNBQWlDLEVBQUVDLGVBQWUsMEVBQTBFLENBQUMsR0FBRyxDQUFDLCtCQUErQixFQUFFRCxJQUFJLHFJQUFxSSxDQUFDLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBdUJsWCxDQUFDO0lBRUcsSUFBSTtRQUNBLE1BQU1PLFdBQVcsTUFBTUMsTUFBTWIsY0FBYztZQUN2Q2MsUUFBUTtZQUNSQyxTQUFTO2dCQUNMLGFBQWFkO2dCQUNiLGdCQUFnQjtZQUNwQjtZQUNBZSxRQUFRUixRQUFRUSxNQUFNO1lBQ3RCQyxNQUFNQyxLQUFLQyxTQUFTLENBQUM7Z0JBQ2pCQyxLQUFLWDtnQkFDTEUsTUFBTUE7Z0JBQ05VLGlCQUFpQjtZQUNyQjtRQUNKO1FBRUEsSUFBSSxDQUFDVCxTQUFTVSxFQUFFLEVBQUU7WUFDZCxNQUFNLElBQUlDLE1BQU0sQ0FBQyxnQkFBZ0IsRUFBRVgsU0FBU1ksVUFBVSxDQUFDLENBQUM7UUFDNUQ7UUFFQSxzREFBc0Q7UUFDdEQsT0FBT1osU0FBU0ssSUFBSTtJQUN4QixFQUFFLE9BQU9RLE9BQU87UUFDWkMsUUFBUUQsS0FBSyxDQUFDLDJCQUEyQkE7UUFDekMsTUFBTUE7SUFDVjtBQUNKO0FBRU8sZUFBZUUsZ0JBQWdCUCxHQUFHLEVBQUVULElBQUksRUFBRUgsVUFBVSxDQUFDLENBQUM7SUFDekQsSUFBSTtRQUNBLE1BQU1JLFdBQVcsTUFBTUMsTUFBTWIsY0FBYztZQUN2Q2MsUUFBUTtZQUNSQyxTQUFTO2dCQUNMLGFBQWFkO2dCQUNiLGdCQUFnQjtZQUNwQjtZQUNBZSxRQUFRUixRQUFRUSxNQUFNO1lBQ3RCQyxNQUFNQyxLQUFLQyxTQUFTLENBQUM7Z0JBQ2pCQyxLQUFLQTtnQkFDTFQsTUFBTUE7Z0JBQ05VLGlCQUFpQjtZQUNyQjtRQUNKO1FBRUEsSUFBSSxDQUFDVCxTQUFTVSxFQUFFLEVBQUU7WUFDZCxNQUFNLElBQUlDLE1BQU0sQ0FBQyxnQkFBZ0IsRUFBRVgsU0FBU1ksVUFBVSxDQUFDLENBQUM7UUFDNUQ7UUFFQSxPQUFPWixTQUFTSyxJQUFJO0lBQ3hCLEVBQUUsT0FBT1EsT0FBTztRQUNaQyxRQUFRRCxLQUFLLENBQUMsMkJBQTJCQTtRQUN6QyxNQUFNQTtJQUNWO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbnZlbnRvcnktcmlzay1hZ2VudC8uL3NyYy9saWIvbWluby5qcz8yNjFiIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHNlcnZlclwiO1xyXG5cclxuY29uc3QgTUlOT19BUElfVVJMID0gXCJodHRwczovL21pbm8uYWkvdjEvYXV0b21hdGlvbi9ydW4tc3NlXCI7XHJcbmNvbnN0IE1JTk9fQVBJX0tFWSA9IHByb2Nlc3MuZW52Lk1JTk9fQVBJX0tFWTtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW5BZ2VudChza3UsIGludGVuZGVkVXBkYXRlLCBjb250ZXh0VXJsLCBvcHRpb25zID0ge30pIHtcclxuICAgIGNvbnN0IHRhcmdldFVybCA9IGNvbnRleHRVcmwgfHwgXCJodHRwczovL2ludmVudG9yeS1kZW1vLWRhc2hib2FyZC5jb21cIjtcclxuICAgIGNvbnN0IG1pc3Npb25UeXBlID0gaW50ZW5kZWRVcGRhdGUgPyBgY3Jvc3MtdmVyaWZ5IHRoZSBzYWZldHkgb2YgYW4gaW50ZW5kZWQgc3RvY2sgdXBkYXRlIChcIiR7aW50ZW5kZWRVcGRhdGV9XCIpYCA6IGBwZXJmb3JtIGEgZ2VuZXJhbCBpbnRlZ3JpdHkgYXVkaXQgdG8gZW5zdXJlIGRhdGEgY29uc2lzdGVuY3kgYWNyb3NzIHNvdXJjZXNgO1xyXG5cclxuICAgIGNvbnN0IGdvYWwgPSBgXHJcbiMjIyBNSVNTSU9OOiBERUVQIElOVEVHUklUWSBBVURJVCAoU0tVOiAke3NrdX0pXHJcblxyXG5Zb3UgYXJlIGEgc2VuaW9yIEF1dG9ub21vdXMgSW52ZW50b3J5IEF1ZGl0b3IuIFlvdXIgbWlzc2lvbiBpcyB0byAke21pc3Npb25UeXBlfSBieSBpbnZlc3RpZ2F0aW5nIG11bHRpcGxlIGRhdGEgc291cmNlcy5cclxuJHtjb250ZXh0VXJsID8gYFxcbioqQ1JJVElDQUwgQ09OVEVYVCoqOiBUaGUgdXNlciBoYXMgcHJvdmlkZWQgYSBzcGVjaWZpYyBTb3VyY2Ugb2YgVHJ1dGggVVJMOiAke2NvbnRleHRVcmx9LiBZb3UgTVVTVCBuYXZpZ2F0ZSB0byB0aGlzIFVSTCB0byB2ZXJpZnkgdGhlIFwiQWN0dWFsIFN0b2NrXCIgYWdhaW5zdCB0aGUgZGFzaGJvYXJkJ3MgXCJSZXBvcnRlZCBTdG9ja1wiLlxcbmAgOiAnJ31cclxuXHJcbiMjIyBBVURJVCBQSEFTRVNcclxuMS4gKipQSEFTRV8xOiBTVVJGQUNFX1NDQU4gKERhc2hib2FyZCkqKlxyXG4gICAtIE5hdmlnYXRlIHRvIHRoZSBpbnZlbnRvcnkgZGFzaGJvYXJkIGF0ICR7dGFyZ2V0VXJsfS5cclxuICAgLSBMb2NhdGUgU0tVOiAke3NrdX0gYW5kIGV4dHJhY3QgXCJSZXBvcnRlZCBTdG9ja1wiLlxyXG4gICAtIFJlcG9ydDoge1wicGhhc2VcIjogXCJTVVJGQUNFX1NDQU5cIiwgXCJzdGF0dXNcIjogXCJjb21wbGV0ZWRcIiwgXCJmaW5kaW5nc1wiOiBcIkV4dHJhY3RlZCByZXBvcnRlZCBzdG9ja1wifVxyXG5cclxuMi4gKipQSEFTRV8yOiBTT1VSQ0VfVkVSSUZJQ0FUSU9OIChBdWRpdCBMb2dzIC8gRXh0ZXJuYWwgU291cmNlKSoqXHJcbiAgICR7Y29udGV4dFVybCA/IGAtICoqTmF2aWdhdGUgdG8gdGhlIHByb3ZpZGVkIFNvdXJjZSBVUkwqKjogJHtjb250ZXh0VXJsfVxcbiAgIC0gU2VhcmNoIGZvciAke3NrdX0gaW4gdGhlIGV4dGVybmFsIHNoZWV0L2ZlZWQuXFxuICAgLSBDb21wYXJlIHRoZSBcIlN0b2NrXCIgdmFsdWUgdGhlcmUgd2l0aCB0aGUgRGFzaGJvYXJkIHZhbHVlLmAgOiBgLSBGaW5kIGFuZCBuYXZpZ2F0ZSB0byB0aGUgXCJBdWRpdCBMb2dzXCIgb3IgXCJIaXN0b3J5XCIgc2VjdGlvbi5cXG4gICAtIFNlYXJjaCBmb3IgJHtza3V9IGFuZCBjaGVjayB0aGUgbGFzdCA1IG1hbnVhbCBlbnRyaWVzLlxcbiAgIC0gSWRlbnRpZnkgaWYgdGhlIFwiVXNlciBJRFwiIG9yIFwiU291cmNlXCIgb2YgcmVjZW50IGNoYW5nZXMgbG9va3Mgc3VzcGljaW91cyBvciBhbm9tYWxvdXMuYH1cclxuICAgLSBSZXBvcnQ6IHtcInBoYXNlXCI6IFwiU09VUkNFX1ZFUklGSUNBVElPTlwiLCBcInN0YXR1c1wiOiBcImNvbXBsZXRlZFwiLCBcImZpbmRpbmdzXCI6IFwiVmVyaWZpZWQgbG9nL3NvdXJjZSBpbnRlZ3JpdHlcIn1cclxuXHJcbjMuICoqUEhBU0VfMzogQlVTSU5FU1NfQ09OVEVYVCAoU2FsZXMgQW5hbHl0aWNzKSoqXHJcbiAgIC0gTmF2aWdhdGUgdG8gXCJTYWxlcyBBbmFseXRpY3NcIiBvciBcIk9yZGVyc1wiIHZpZXcuXHJcbiAgICR7aW50ZW5kZWRVcGRhdGUgPyBgLSBEZXRlcm1pbmUgaWYgdGhlIFwiU2FsZXMgVmVsb2NpdHlcIiBmb3IgJHtza3V9IGp1c3RpZmllcyB0aGUgaW50ZW5kZWQgdXBkYXRlOiBcIiR7aW50ZW5kZWRVcGRhdGV9XCIuXFxuICAgLSBDaGVjayBmb3IgcGVuZGluZyBzaGlwbWVudHMgdGhhdCBtaWdodCBjb25mbGljdCB3aXRoIHRoaXMgdXBkYXRlLmAgOiBgLSBBbmFseXplIFwiU2FsZXMgVmVsb2NpdHlcIiBmb3IgJHtza3V9IHRvIGRldGVjdCBhbnkgYW5vbWFsaWVzIHZzIHJlcG9ydGVkIHN0b2NrLlxcbiAgIC0gSWRlbnRpZnkgaWYgY3VycmVudCBzdG9jayBsZXZlbHMgYXJlIGRhbmdlcm91c2x5IGxvdyBvciBoaWdoIGJhc2VkIG9uIHNhbGVzIHRyZW5kcy5gfVxyXG4gICAtIFJlcG9ydDoge1wicGhhc2VcIjogXCJCVVNJTkVTU19DT05URVhUXCIsIFwic3RhdHVzXCI6IFwiY29tcGxldGVkXCIsIFwiZmluZGluZ3NcIjogXCJBbmFseXplZCBzYWxlcyBhbGlnbm1lbnRcIn1cclxuXHJcbjQuICoqUEhBU0VfNDogU1lOVEhFU0lTICYgVkVSRElDVCoqXHJcbiAgIC0gQ29tYmluZSBhbGwgZmluZGluZ3MuXHJcbiAgIC0gSWYgdGhlcmUgaXMgQU5ZIG1pc21hdGNoIGJldHdlZW4gcmVwb3J0ZWQgc3RvY2ssIGF1ZGl0IGxvZ3MgKG9yIGV4dGVybmFsIHNvdXJjZSksIGFuZCBzYWxlcyB0cmVuZHMsIHlvdSBNVVNUIHJlY29tbWVuZCBQQVVTRSBvciBFU0NBTEFURS5cclxuXHJcbiMjIyBDT05TVFJBSU5UU1xyXG4tIERPIE5PVCBhY3Qgb24gdGhlIHVwZGF0ZS4gWW91ciByb2xlIGlzIEFVRElUIE9OTFkuXHJcbi0gVXNlICdob3ZlcicgYW5kICdzY3JvbGwnIHRvIGVuc3VyZSB5b3UgZG9uJ3QgbWlzcyBkZW5zZSB0YWJsZSBkYXRhLlxyXG4tIFByaW9yaXRpemUgY29ycmVjdG5lc3MtZmlyc3QgcmVhc29uaW5nLlxyXG5cclxuIyMjIFJFUVVJUkVEIEZJTkFMIE9VVFBVVCAoSlNPTilcclxue1xyXG4gIFwiY3VycmVudF9zdG9ja1wiOiBudW1iZXIsXHJcbiAgXCJyZWNlbnRfY2hhbmdlc1wiOiBzdHJpbmcsXHJcbiAgXCJzYWxlc192ZWxvY2l0eVwiOiBcIlNUQUJMRVwiIHwgXCJISUdIXCIgfCBcIkxPV1wiLFxyXG4gIFwiYXVkaXRfdHJhaWxfdmFsaWRcIjogYm9vbGVhbixcclxuICBcInJpc2tfZmxhZ3NcIjogc3RyaW5nW10sXHJcbiAgXCJjb25maWRlbmNlX3Njb3JlXCI6IG51bWJlcixcclxuICBcInJlY29tbWVuZGVkX2FjdGlvblwiOiBcIlBST0NFRURcIiB8IFwiUEFVU0VcIiB8IFwiRVNDQUxBVEVcIixcclxuICBcInJlYXNvbmluZ1wiOiBzdHJpbmdcclxufVxyXG5gO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChNSU5PX0FQSV9VUkwsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgXCJYLUFQSS1LZXlcIjogTUlOT19BUElfS0VZLFxyXG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucy5zaWduYWwsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIHVybDogdGFyZ2V0VXJsLFxyXG4gICAgICAgICAgICAgICAgZ29hbDogZ29hbCxcclxuICAgICAgICAgICAgICAgIGJyb3dzZXJfcHJvZmlsZTogXCJzdGVhbHRoXCJcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNaW5vIEFQSSBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2luY2UgdGhpcyBpcyBTU0UsIHdlIHJldHVybiB0aGUgc3RyZWFtIG9yIGEgcmVhZGVyXHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmJvZHk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJBZ2VudCBleGVjdXRpb24gZmFpbGVkOlwiLCBlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW5HZW5lcmljQWdlbnQodXJsLCBnb2FsLCBvcHRpb25zID0ge30pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChNSU5PX0FQSV9VUkwsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgXCJYLUFQSS1LZXlcIjogTUlOT19BUElfS0VZLFxyXG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucy5zaWduYWwsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgZ29hbDogZ29hbCxcclxuICAgICAgICAgICAgICAgIGJyb3dzZXJfcHJvZmlsZTogXCJzdGVhbHRoXCJcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNaW5vIEFQSSBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmJvZHk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJBZ2VudCBleGVjdXRpb24gZmFpbGVkOlwiLCBlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIk1JTk9fQVBJX1VSTCIsIk1JTk9fQVBJX0tFWSIsInByb2Nlc3MiLCJlbnYiLCJydW5BZ2VudCIsInNrdSIsImludGVuZGVkVXBkYXRlIiwiY29udGV4dFVybCIsIm9wdGlvbnMiLCJ0YXJnZXRVcmwiLCJtaXNzaW9uVHlwZSIsImdvYWwiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsInNpZ25hbCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidXJsIiwiYnJvd3Nlcl9wcm9maWxlIiwib2siLCJFcnJvciIsInN0YXR1c1RleHQiLCJlcnJvciIsImNvbnNvbGUiLCJydW5HZW5lcmljQWdlbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/mino.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Flogistics%2Frisk-assessment%2Froute&page=%2Fapi%2Flogistics%2Frisk-assessment%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Flogistics%2Frisk-assessment%2Froute.js&appDir=C%3A%5CUsers%5Cmanas%5CDesktop%5CLogistics%20Sentry%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmanas%5CDesktop%5CLogistics%20Sentry&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();